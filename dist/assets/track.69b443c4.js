var ee=(n,e,r)=>new Promise((t,a)=>{var l=s=>{try{i(r.next(s))}catch(c){a(c)}},o=s=>{try{i(r.throw(s))}catch(c){a(c)}},i=s=>s.done?t(s.value):Promise.resolve(s.value).then(l,o);i((r=r.apply(n,e)).next())});import{S as ke,y as ve,z as we,B as y,a9 as h,A as z,bw as te,F as L,H as I,aa as b,C as O,bx as re,I as p,J as S,K as De,O as E,ab as k,P as D,by as _e,T as m,Y as d,ad as v,a1 as pe,X as G,Z as J,aS as Fe,ag as H,aV as qe,aT as We,ci as je,am as Ke,an as Xe,cj as Ge,ck as Wt,cl as Je,d as me,Q as ce,al as Le,a2 as fe,a7 as Ae,a8 as Ce,bZ as Qe,ac as Ye,c2 as ge,a3 as Ze,bz as xe,a4 as et,_ as tt,$ as rt,a0 as at,bu as Ve,bO as Kt,n as Pe,b9 as Xt}from"./vendor.36439469.js";import{ae as lt,n as Gt,g as $e,h as ie,I as se,U as Ee,X as ze,ax as Jt,H as Q,y as Qt,a as he,w as Te,b as Zt,ay as xt,d as R,az as er,aA as tr,aB as rr,t as Ue,aC as nt,O as ar,K as st,$ as lr,a5 as ot,a0 as it,aD as ct,aE as nr,x as Oe,l as He,aF as sr,aG as ft,j as Me,o as Re,A as or,aH as ut,aI as mt,B as ue,e as ir,f as cr,S as fr,i as ur,aJ as mr,L as $r,a7 as dr,N as pr,_ as gr,aK as _r,aL as hr,c as br,T as kr,ak as vr,Q as wr,aM as $t,a3 as Tr}from"./index.35142b07.js";import{S as Sr}from"./stepper.fdf3c507.js";import dt from"./elephant.ded44fa8.js";import{O as Nr}from"./offline-queue.9c4da2fd.js";import{S as pt}from"./shortcut-button.7fcdb474.js";import{e as Dr}from"./export-helper.f2e9b2fa.js";import{S as Er}from"./swipeable.489d57ab.js";function gt(n){let e,r,t,a,l,o,i,s,c=n[3].activeTip+1+"",f,u,_=n[0][n[3].activeTip]+"",T,A,w,N,C,W,Z,Y,U,x;return r=new $e({props:{className:"px-2 opacity-60",title:"PrviousTip Tip",color:"clear",icon:!0,$$slots:{default:[Br]},$$scope:{ctx:n}}}),r.$on("click",n[6]),N=new Sr({props:{steps:n[0].length,current:n[3].activeTip}}),W=new $e({props:{title:"Hide Tips",color:"clear",icon:!0,$$slots:{default:[Ir]},$$scope:{ctx:n}}}),W.$on("click",n[4]),Y=new $e({props:{className:"px-2 opacity-60",title:"Next Tip",color:"clear",icon:!0,$$slots:{default:[yr]},$$scope:{ctx:n}}}),Y.$on("click",n[5]),{c(){e=y("section"),h(r.$$.fragment),t=z(),a=y("div"),l=y("div"),o=y("div"),i=y("strong"),s=te("Tip #"),f=te(c),u=z(),T=te(_),A=z(),w=y("nav"),h(N.$$.fragment),C=z(),h(W.$$.fragment),Z=z(),h(Y.$$.fragment),this.h()},l(M){e=L(M,"SECTION",{class:!0});var j=I(e);b(r.$$.fragment,j),t=O(j),a=L(j,"DIV",{class:!0,style:!0});var ae=I(a);l=L(ae,"DIV",{class:!0});var q=I(l);o=L(q,"DIV",{class:!0});var K=I(o);i=L(K,"STRONG",{});var oe=I(i);s=re(oe,"Tip #"),f=re(oe,c),oe.forEach(p),u=O(K),T=re(K,_),K.forEach(p),q.forEach(p),A=O(ae),w=L(ae,"NAV",{class:!0,"aria-label":!0});var $=I(w);b(N.$$.fragment,$),C=O($),b(W.$$.fragment,$),$.forEach(p),ae.forEach(p),Z=O(j),b(Y.$$.fragment,j),j.forEach(p),this.h()},h(){S(o,"class","text-base leading-tight tip filler svelte-1mpe9q8"),S(l,"class","flex px-4 mb-2"),S(w,"class","flex items-center justify-center px-2"),S(w,"aria-label","Navigate the Nomie tips"),S(a,"class","p-2 mx-auto rounded-md n-tips bg-solid svelte-1mpe9q8"),De(a,"max-width","280px"),S(e,"class",U="n-tip-wrapper bg-gray-400 dark:bg-gray-900 text-white px-4 "+n[1]+" relative svelte-1mpe9q8")},m(M,j){E(M,e,j),k(r,e,null),D(e,t),D(e,a),D(a,l),D(l,o),D(o,i),D(i,s),D(i,f),D(o,u),D(o,T),D(a,A),D(a,w),k(N,w,null),D(w,C),k(W,w,null),D(e,Z),k(Y,e,null),x=!0},p(M,j){const ae={};j&512&&(ae.$$scope={dirty:j,ctx:M}),r.$set(ae),(!x||j&8)&&c!==(c=M[3].activeTip+1+"")&&_e(f,c),(!x||j&9)&&_!==(_=M[0][M[3].activeTip]+"")&&_e(T,_);const q={};j&1&&(q.steps=M[0].length),j&8&&(q.current=M[3].activeTip),N.$set(q);const K={};j&512&&(K.$$scope={dirty:j,ctx:M}),W.$set(K);const oe={};j&512&&(oe.$$scope={dirty:j,ctx:M}),Y.$set(oe),(!x||j&2&&U!==(U="n-tip-wrapper bg-gray-400 dark:bg-gray-900 text-white px-4 "+M[1]+" relative svelte-1mpe9q8"))&&S(e,"class",U)},i(M){x||(m(r.$$.fragment,M),m(N.$$.fragment,M),m(W.$$.fragment,M),m(Y.$$.fragment,M),x=!0)},o(M){d(r.$$.fragment,M),d(N.$$.fragment,M),d(W.$$.fragment,M),d(Y.$$.fragment,M),x=!1},d(M){M&&p(e),v(r),v(N),v(W),v(Y)}}}function Br(n){let e,r;return e=new ie({props:{icon:Fe,size:42,className:"text-white"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ir(n){let e,r;return e=new ie({props:{icon:qe,size:18,className:"text-white"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function yr(n){let e,r;return e=new ie({props:{icon:We,size:42,className:"text-white"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Lr(n){let e,r,t=n[2]&&gt(n);return{c(){t&&t.c(),e=pe()},l(a){t&&t.l(a),e=pe()},m(a,l){t&&t.m(a,l),E(a,e,l),r=!0},p(a,[l]){a[2]?t?(t.p(a,l),l&4&&m(t,1)):(t=gt(a),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(G(),d(t,1,1,()=>{t=null}),J())},i(a){r||(m(t),r=!0)},o(a){d(t),r=!1},d(a){t&&t.d(a),a&&p(e)}}}function Ar(n,e,r){let{tips:t=[]}=e,{className:a=""}=e,l=lt.local.get("hidden-tips")||[],o=null,i=!1;const s={activeTip:0};function c(){return ee(this,null,function*(){(yield se.confirm("Hide Tips?"))&&(l.push(o),lt.local.put("hidden-tips",l),r(2,i=!1))})}function f(){s.activeTip==t.length-1?r(3,s.activeTip=0,s):r(3,s.activeTip++,s)}function u(){s.activeTip==0?r(3,s.activeTip=t.length-1,s):r(3,s.activeTip--,s)}return n.$$set=_=>{"tips"in _&&r(0,t=_.tips),"className"in _&&r(1,a=_.className)},n.$$.update=()=>{n.$$.dirty&129&&(t?(r(7,o=Gt(JSON.stringify(t))),r(2,i=l.indexOf(o)==-1)):r(2,i=!1))},[t,a,i,s,c,f,u,o]}class Vr extends ke{constructor(e){super();ve(this,e,Ar,Lr,we,{tips:0,className:1})}}function zr(n){let e,r,t=[{xmlns:"http://www.w3.org/2000/svg"},{class:"ionicon"},{viewBox:"0 0 512 512"},n[0]],a={};for(let l=0;l<t.length;l+=1)a=je(a,t[l]);return{c(){e=Ke("svg"),r=Ke("path"),this.h()},l(l){e=Xe(l,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=I(e);r=Xe(o,"path",{d:!0}),I(r).forEach(p),o.forEach(p),this.h()},h(){S(r,"d","M473 39.05a24 24 0 0 0-25.5-5.46L47.47 185h-.08a24 24 0 0 0 1 45.16l.41.13 137.3 58.63a16 16 0 0 0 15.54-3.59L422 80a7.07 7.07 0 0 1 10 10L226.66 310.26a16 16 0 0 0-3.59 15.54l58.65 137.38c.06.2.12.38.19.57 3.2 9.27 11.3 15.81 21.09 16.25h1a24.63 24.63 0 0 0 23-15.46L478.39 64.62A24 24 0 0 0 473 39.05z"),Ge(e,a)},m(l,o){E(l,e,o),D(e,r)},p(l,[o]){Ge(e,a=Wt(t,[{xmlns:"http://www.w3.org/2000/svg"},{class:"ionicon"},{viewBox:"0 0 512 512"},o&1&&l[0]]))},i:H,o:H,d(l){l&&p(e)}}}function Or(n,e,r){return n.$$set=t=>{r(0,e=je(je({},e),Je(t)))},e=Je(e),[e]}class Mr extends ke{constructor(e){super();ve(this,e,Or,zr,we,{})}}var jr=Mr;function Cr(n){let e,r,t,a,l,o,i=me(n[0]).format(n[1])+"",s,c,f,u=me(n[0]).format("YYYY")+"",_,T,A,w,N,C,W,Z;return t=new ie({props:{icon:Fe,size:14}}),N=new ie({props:{icon:We,size:14}}),{c(){e=y("div"),r=y("button"),h(t.$$.fragment),a=z(),l=y("div"),o=y("div"),s=te(i),c=z(),f=y("div"),_=te(u),A=z(),w=y("button"),h(N.$$.fragment),this.h()},l(Y){e=L(Y,"DIV",{class:!0,"aria-label":!0});var U=I(e);r=L(U,"BUTTON",{class:!0});var x=I(r);b(t.$$.fragment,x),x.forEach(p),a=O(U),l=L(U,"DIV",{class:!0,"aria-label":!0});var M=I(l);o=L(M,"DIV",{class:!0});var j=I(o);s=re(j,i),j.forEach(p),c=O(M),f=L(M,"DIV",{class:!0});var ae=I(f);_=re(ae,u),ae.forEach(p),M.forEach(p),A=O(U),w=L(U,"BUTTON",{class:!0});var q=I(w);b(N.$$.fragment,q),q.forEach(p),U.forEach(p),this.h()},h(){S(r,"class","stepper-button"),S(o,"class","font-semibold dark:text-white"),S(f,"class","text-gray-500"),S(l,"class","w-12 font-semibold leading-none text-center"),S(l,"aria-label",T=me(n[0]).format(`${n[1]} YYYY`)),S(w,"class","stepper-button"),S(e,"class","flex items-center text-xs space-x- date-stepper"),S(e,"aria-label","Control the Date")},m(Y,U){E(Y,e,U),D(e,r),k(t,r,null),D(e,a),D(e,l),D(l,o),D(o,s),D(l,c),D(l,f),D(f,_),D(e,A),D(e,w),k(N,w,null),C=!0,W||(Z=[ce(r,"click",n[3]),ce(w,"click",n[2])],W=!0)},p(Y,[U]){(!C||U&1)&&i!==(i=me(Y[0]).format(Y[1])+"")&&_e(s,i),(!C||U&1)&&u!==(u=me(Y[0]).format("YYYY")+"")&&_e(_,u),(!C||U&1&&T!==(T=me(Y[0]).format(`${Y[1]} YYYY`)))&&S(l,"aria-label",T)},i(Y){C||(m(t.$$.fragment,Y),m(N.$$.fragment,Y),C=!0)},o(Y){d(t.$$.fragment,Y),d(N.$$.fragment,Y),C=!1},d(Y){Y&&p(e),v(t),v(N),W=!1,Le(Z)}}}function Yr(n,e,r){let t;fe(n,Ee,c=>r(5,t=c));let{date:a}=e;Ee.getDateTimeFormat().shortDate;let l=new Date;const o=t.meta.is24Hour?"DD/MM":"MM/DD",i=()=>{r(0,l=me(l).add(1,"day").toDate()),r(4,a=l.getTime())},s=()=>{r(0,l=me(l).subtract(1,"day").toDate()),r(4,a=l.getTime())};return n.$$set=c=>{"date"in c&&r(4,a=c.date)},n.$$.update=()=>{n.$$.dirty&17&&(a&&a!==l.getTime()?r(0,l=new Date(a)):!a&&l.getTime()&&r(0,l=new Date))},[l,o,i,s,a]}class Pr extends ke{constructor(e){super();ve(this,e,Yr,Cr,we,{date:4})}}function Ur(n){let e=nt(n[0].score,!0)+"",r;return{c(){r=te(e)},l(t){r=re(t,e)},m(t,a){E(t,r,a)},p(t,a){a&1&&e!==(e=nt(t[0].score,!0)+"")&&_e(r,e)},d(t){t&&p(r)}}}function Hr(n){let e,r;return e=new ie({props:{name:"expand",className:`text-black dark:text-white text-opacity-50
                dark:text-opacity-50`}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Rr(n){let e,r;return e=new $e({props:{ariaLabel:"Save Note",color:"success",size:"sm",$$slots:{default:[qr]},$$scope:{ctx:n}}}),e.$on("click",n[6].logSave),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a&536870912&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Fr(n){let e,r;return e=new $e({props:{className:"save-button action-button mr-2",shape:"round",color:"success",size:"sm",$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a&536870912&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function qr(n){let e,r,t,a,l;return a=new ar({props:{icon:jr,size:20,className:"ml-1 text-white dark:text-black"}}),{c(){e=y("span"),r=te("Save"),t=z(),h(a.$$.fragment),this.h()},l(o){e=L(o,"SPAN",{class:!0});var i=I(e);r=re(i,"Save"),i.forEach(p),t=O(o),b(a.$$.fragment,o),this.h()},h(){S(e,"class","md:text-lg dark:text-black")},m(o,i){E(o,e,i),D(e,r),E(o,t,i),k(a,o,i),l=!0},p:H,i(o){l||(m(a.$$.fragment,o),l=!0)},o(o){d(a.$$.fragment,o),l=!1},d(o){o&&p(e),o&&p(t),v(a,o)}}}function Wr(n){let e,r;return e=new st({props:{size:20}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Kr(n){let e,r,t,a,l,o,i,s,c,f,u,_,T,A,w,N,C,W,Z,Y,U,x,M,j,ae,q,K,oe,$,V,F;o=new xt({props:{input:n[0].note,scroller:!0}}),o.$on("select",n[8]),A=new ie({props:{icon:qe,size:16,className:"opacity-50 dark:text-white"}}),C=new $e({props:{type:"clear",shape:"round",$$slots:{default:[Ur]},$$scope:{ctx:n}}}),C.$on("click",n[14]);function X(B){n[15](B)}let le={};n[0].end!==void 0&&(le.date=n[0].end),Z=new Pr({props:le}),Ae.push(()=>Ce(Z,"date",X)),j=new $e({props:{ariaLabel:"Location and Date settings",size:"xs",type:"clear",shape:"round",className:"px-2",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),j.$on("click",se.toggleFocusedEditor);const ye=[Fr,Rr],be=[];function g(B,P){return B[1].saving?0:1}return q=g(n),K=be[q]=ye[q](n),{c(){e=y("div"),r=y("div"),a=z(),l=y("div"),h(o.$$.fragment),i=z(),s=y("div"),c=y("div"),f=y("textarea"),_=z(),T=y("button"),h(A.$$.fragment),w=z(),N=y("div"),h(C.$$.fragment),W=z(),h(Z.$$.fragment),U=z(),x=y("div"),M=z(),h(j.$$.fragment),ae=z(),K.c(),this.h()},l(B){e=L(B,"DIV",{class:!0});var P=I(e);r=L(P,"DIV",{class:!0}),I(r).forEach(p),a=O(P),l=L(P,"DIV",{class:!0});var ne=I(l);b(o.$$.fragment,ne),i=O(ne),s=L(ne,"DIV",{class:!0});var Se=I(s);c=L(Se,"DIV",{class:!0});var Ne=I(c);f=L(Ne,"TEXTAREA",{"aria-label":!0,id:!0,style:!0,placeholder:!0}),I(f).forEach(p),_=O(Ne),T=L(Ne,"BUTTON",{class:!0});var Be=I(T);b(A.$$.fragment,Be),Be.forEach(p),Ne.forEach(p),w=O(Se),N=L(Se,"DIV",{class:!0});var de=I(N);b(C.$$.fragment,de),W=O(de),b(Z.$$.fragment,de),U=O(de),x=L(de,"DIV",{class:!0}),I(x).forEach(p),M=O(de),b(j.$$.fragment,de),ae=O(de),K.l(de),de.forEach(p),Se.forEach(p),ne.forEach(p),P.forEach(p),this.h()},h(){S(r,"class",t="save-progress  "+(n[3]?"saving":"")+" "+(n[1].saving?"saving":"")),S(f,"aria-label","Note entry field"),S(f,"id","textarea-capture-note"),De(f,"overflow","hidden"),f.disabled=u=n[3]||_t,S(f,"placeholder",R.t("general.whats-up","What's up?")),S(T,"class","absolute top-3 right-4 clear-button"),S(c,"class","relative top-section"),S(x,"class","filler"),S(N,"class","flex px-2 py-1 space-x-2 border-t border-gray-500 border-opacity-25 bottom-section"),S(s,"class",oe="mask-textarea "+(n[4]?"focused":"blurred")+" "+(n[0].lat||n[0].note.trim().length>0?"populated":"empty")),S(l,"class","p-0"),S(e,"class","capture-log")},m(B,P){E(B,e,P),D(e,r),D(e,a),D(e,l),k(o,l,null),D(l,i),D(l,s),D(s,c),D(c,f),Qe(f,n[0].note),n[10](f),D(c,_),D(c,T),k(A,T,null),D(s,w),D(s,N),k(C,N,null),D(N,W),k(Z,N,null),D(N,U),D(N,x),D(N,M),k(j,N,null),D(N,ae),be[q].m(N,null),$=!0,V||(F=[ce(f,"input",n[9]),ce(f,"input",n[6].input),ce(f,"keydown",n[6].keyPress),ce(f,"focus",n[11]),ce(f,"blur",n[12]),ce(f,"paste",n[6].keyPress),ce(T,"click",n[13]),ce(s,"click",n[16])],V=!0)},p(B,P){(!$||P&10&&t!==(t="save-progress  "+(B[3]?"saving":"")+" "+(B[1].saving?"saving":"")))&&S(r,"class",t);const ne={};P&1&&(ne.input=B[0].note),o.$set(ne),(!$||P&8&&u!==(u=B[3]||_t))&&(f.disabled=u),P&1&&Qe(f,B[0].note);const Se={};P&536870913&&(Se.$$scope={dirty:P,ctx:B}),C.$set(Se);const Ne={};!Y&&P&1&&(Y=!0,Ne.date=B[0].end,Ye(()=>Y=!1)),Z.$set(Ne);const Be={};P&536870912&&(Be.$$scope={dirty:P,ctx:B}),j.$set(Be);let de=q;q=g(B),q===de?be[q].p(B,P):(G(),d(be[de],1,1,()=>{be[de]=null}),J(),K=be[q],K?K.p(B,P):(K=be[q]=ye[q](B),K.c()),m(K,1),K.m(N,null)),(!$||P&17&&oe!==(oe="mask-textarea "+(B[4]?"focused":"blurred")+" "+(B[0].lat||B[0].note.trim().length>0?"populated":"empty")))&&S(s,"class",oe)},i(B){$||(m(o.$$.fragment,B),m(A.$$.fragment,B),m(C.$$.fragment,B),m(Z.$$.fragment,B),m(j.$$.fragment,B),m(K),$=!0)},o(B){d(o.$$.fragment,B),d(A.$$.fragment,B),d(C.$$.fragment,B),d(Z.$$.fragment,B),d(j.$$.fragment,B),d(K),$=!1},d(B){B&&p(e),v(o),n[10](null),v(A),v(C),v(Z),v(j),be[q].d(),V=!1,Le(F)}}}function Xr(n){let e,r,t;function a(o){n[17](o)}let l={className:"bg-primary-500 shadow-2xl",size:"lg",id:"score",showClose:!0};return n[0].score!==void 0&&(l.score=n[0].score),e=new er({props:l}),Ae.push(()=>Ce(e,"score",a)),e.$on("close",n[18]),e.$on("change",n[19]),{c(){h(e.$$.fragment)},l(o){b(e.$$.fragment,o)},m(o,i){k(e,o,i),t=!0},p(o,i){const s={};!r&&i&1&&(r=!0,s.score=o[0].score,Ye(()=>r=!1)),e.$set(s)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function Gr(n){let e,r,t,a,l,o,i;return r=new ze({props:{$$slots:{default:[Kr]},$$scope:{ctx:n}}}),a=new Jt({props:{id:"positivty-selector",visible:n[5],$$slots:{default:[Xr]},$$scope:{ctx:n}}}),{c(){e=y("div"),h(r.$$.fragment),t=z(),h(a.$$.fragment),this.h()},l(s){e=L(s,"DIV",{class:!0});var c=I(e);b(r.$$.fragment,c),c.forEach(p),t=O(s),b(a.$$.fragment,s),this.h()},h(){S(e,"class","capture-wrapper")},m(s,c){E(s,e,c),k(r,e,null),E(s,t,c),k(a,s,c),l=!0,o||(i=[ce(e,"swipeup",n[6].swipeUp),ce(e,"swipedown",n[6].swipeDown)],o=!0)},p(s,[c]){const f={};c&536870975&&(f.$$scope={dirty:c,ctx:s}),r.$set(f);const u={};c&32&&(u.visible=s[5]),c&536870945&&(u.$$scope={dirty:c,ctx:s}),a.$set(u)},i(s){l||(m(r.$$.fragment,s),m(a.$$.fragment,s),l=!0)},o(s){d(r.$$.fragment,s),d(a.$$.fragment,s),l=!1},d(s){s&&p(e),v(r),s&&p(t),v(a,s),o=!1,Le(i)}}}let _t=!1;function Jr(n,e,r){let t,a,l,o,i;fe(n,Q,$=>r(0,t=$)),fe(n,Qt,$=>r(23,a=$)),fe(n,he,$=>r(24,l=$)),fe(n,Ee,$=>r(7,o=$)),fe(n,Te,$=>r(1,i=$));const s=new Zt("capture-log");!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);let c,f=!1,u,_,T=!1,A=!1,w={date:null,dateStarter:me().format("YYYY-MM-DDTHH:mm"),score:0,autocompleteResults:null,cursorIndex:null,partialTag:null,advanced:!1,dateFormated:null};const N={dateAdd($,V){let F=me(t.end||new Date).add($,V);ge(Q,t.end=F.toDate().getTime(),t)},clearDate(){w.date=null,ge(Q,t.start=null,t),ge(Q,t.end=null,t)},clearLocation(){ge(Q,t.lat=null,t),ge(Q,t.lng=null,t),ge(Q,t.location=null,t)},toggleCustomLocation(){return ee(this,null,function*(){if(t.lat)ge(Q,t.lat=null,t),ge(Q,t.lng=null,t);else{let $=yield se.pickLocation();$&&(ge(Q,t.lat=$.lat,t),ge(Q,t.lng=$.lng,t),ge(Q,t.location=$.name,t))}})},input($){clearTimeout(u),u=setTimeout(()=>{const V=tr.parse(t.note);N.highlightElements(V||[])},400),N.checkTextareaSize()},highlightElements($){const V=document.getElementsByClassName("tracker-board-button"),F=$.filter(X=>X.type==="tracker").map(X=>X.id);for(let X=0;X<V.length;X++)try{let le=V[X].id.split("-")[1];F.indexOf(le)!==-1?V[X].classList.add("in-note"):V[X].classList.contains("in-note")&&V[X].classList.remove("in-note")}catch(le){s.error(le.message)}},checkTextareaSize(){return ee(this,null,function*(){const $=document.getElementById("textarea-capture-note");clearTimeout(_),_=setTimeout(()=>{if($){let V=($||{}).scrollHeight||42;$&&t.note.length>0?$.style.height=(V>300?300:V)+"px":$.style.height="36px"}},10)})},autoCompleteSearch($,V="tracker"){try{if(V=="tracker"){let F=Object.keys(l.trackers||{}).map(X=>l.trackers[X]).filter(X=>X.tag.search($.replace("#",""))>-1);return F.length?F:null}else if(V==="person"){try{let F=Object.keys(a.people||[]).filter(X=>X.toLowerCase().search($.replace("@",""))>-1);return F.length?F.map(X=>({tag:X,emoji:"\u{1F464}",type:"person"})):null}catch(F){s.error(`Error Caught ${F.message}`)}return null}else if(V==="context")return s.error("### LOOK INTO THIS!!!! todo:// context here is not right"),[]}catch(F){}},calculateScore(){ge(Q,t.score=t.score||rr(t.note,new Date().getTime()),t)},logSave(){return ee(this,null,function*(){r(3,f=!0),N.calculateScore();try{yield Te.saveLog(t),r(3,f=!1)}catch($){s.error(`Error in capture-log logSave ${$.message}`),r(3,f=!1)}N.clear()})},autocompleteText($){return ee(this,null,function*(){Q.update(V=>(V.note=V.note.replace(w.partialTag,$+" "),V)),yield Ue(1),document.getElementById("textarea-capture-note").focus(),N.autoCompleteDone()})},autoCompleteDone(){return ee(this,null,function*(){setTimeout(()=>{w.partialTag=null,w.cursorIndex=null,w.autocompleteResults=null},10)})},keyPress($){if($.key==="Enter"&&$.getModifierState("Shift"))$.preventDefault();else if($.key==="Enter"&&($.getModifierState("Control")||$.getModifierState("Meta")))N.logSave();else{let V=$.target.value;if(V.charAt(V.length-1)==" ")N.autoCompleteDone();else if(V.length){let X=V.split(" "),le=X[X.length-1];w.cursorIndex=X.length-1,le.charAt(0)==="#"&&le.length>1?(w.partialTag=le,w.autocompleteResults=N.autoCompleteSearch(le,"tracker")):le.charAt(0)==="@"&&le.length>1?(w.partialTag=le,w.autocompleteResults=N.autoCompleteSearch(le,"person")):le.charAt(0)==="+"&&le.length>1?(w.partialTag=le,w.autocompleteResults=N.autoCompleteSearch(le,"context")):(w.partialTag=null,w.autocompleteResults=null)}else w.partialTag=null,w.autocompleteResults=null}},clear(){Q.clear(),N.autoCompleteDone(),r(4,T=!1),setTimeout(()=>{w.date=null,w.autocompleteResults=null,w.advanced=!1,w.cursorIndex=null,w.dateStarter=me().format("YYYY-MM-DDTHH:mm"),c&&r(2,c.style.height="40px",c),c.blur()},120)}};Te.hook("onLogSaved",$=>{setTimeout(()=>{w.advanced=!1,N.autoCompleteDone(),N.input({})},10)}),Q.hook("onAddElement",$=>{N.input({})}),Q.hook("onAddTag",$=>{setTimeout(()=>{c&&r(2,c),N.checkTextareaSize()},10)});const C=$=>{Q.updateNote($.detail.note),c.focus(),c.setSelectionRange(c.value.length,c.value.length),Ue(100).then(()=>{N.checkTextareaSize()})};function W(){t.note=this.value,Q.set(t)}function Z($){Ae[$?"unshift":"push"](()=>{c=$,r(2,c)})}const Y=()=>{r(4,T=!0)},U=()=>{r(4,T=!1)},x=()=>ee(this,null,function*(){t.note.length>0?(yield se.confirm("Discard this note?"))&&N.clear():N.clear()}),M=()=>{r(5,A=!A)};function j($){n.$$.not_equal(t.end,$)&&(t.end=$,Q.set(t))}const ae=()=>{r(4,T=!0)};function q($){n.$$.not_equal(t.score,$)&&(t.score=$,Q.set(t))}const K=()=>{r(5,A=!1)},oe=$=>{ge(Q,t.score=$.detail,t),r(5,A=!1)};return n.$$.update=()=>{if(n.$$.dirty&2&&(i.saving?r(3,f=!0):r(3,f=!1)),n.$$.dirty&129&&t.end){let $=o.meta.is24Hour?"HH:mm":"h:mm a",V=o.meta.is24Hour?"MM/DD/YYYY":"MMM D YYYY";w.dateFormated=me(t.end).format(`${V} ${$}`)}},[t,i,c,f,T,A,N,o,C,W,Z,Y,U,x,M,j,ae,q,K,oe]}class Qr extends ke{constructor(e){super();ve(this,e,Jr,Gr,we,{})}}const Zr=n=>({}),ht=n=>({});function bt(n,e,r){const t=n.slice();return t[9]=e[r],t}function xr(n){let e,r;return e=new lr({props:{activeIndex:n[2].activeIndex,centerIfPossible:!0,wrapperClass:"space-x-2",className:"n-board-tabs",$$slots:{default:[aa]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a&4&&(l.activeIndex=t[2].activeIndex),a&131&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function ea(n){let e,r,t,a,l,o,i;return r=new ot({}),a=new dt({props:{size:22}}),o=new ot({}),{c(){e=y("div"),h(r.$$.fragment),t=z(),h(a.$$.fragment),l=z(),h(o.$$.fragment),this.h()},l(s){e=L(s,"DIV",{class:!0,"data-scroll":!0});var c=I(e);b(r.$$.fragment,c),t=O(c),b(a.$$.fragment,c),l=O(c),b(o.$$.fragment,c),c.forEach(p),this.h()},h(){S(e,"class","flex items-center flex-grow flex-shrink n-board-tabs"),S(e,"data-scroll","0")},m(s,c){E(s,e,c),k(r,e,null),D(e,t),k(a,e,null),D(e,l),k(o,e,null),i=!0},p:H,i(s){i||(m(r.$$.fragment,s),m(a.$$.fragment,s),m(o.$$.fragment,s),i=!0)},o(s){d(r.$$.fragment,s),d(a.$$.fragment,s),d(o.$$.fragment,s),i=!1},d(s){s&&p(e),v(r),v(a),v(o)}}}function ta(n){let e=n[9].label+"",r;return{c(){r=te(e)},l(t){r=re(t,e)},m(t,a){E(t,r,a)},p(t,a){a&1&&e!==(e=t[9].label+"")&&_e(r,e)},i:H,o:H,d(t){t&&p(r)}}}function ra(n){let e,r;return e=new dt({props:{size:16}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function kt(n){let e,r,t,a,l,o,i,s;const c=[ra,ta],f=[];function u(A,w){return A[9].id=="all"?0:1}r=u(n),t=f[r]=c[r](n);function _(){return n[5](n[9])}function T(){return n[6](n[9])}return{c(){e=y("button"),t.c(),this.h()},l(A){e=L(A,"BUTTON",{label:!0,class:!0});var w=I(e);t.l(w),w.forEach(p),this.h()},h(){S(e,"label",a=R.t("general.all-trackers","All Trackers")),S(e,"class",l="tab board-"+n[9].id+" "+(n[9].id==n[1]?"selected":"inactive")+" svelte-1bguyup")},m(A,w){E(A,e,w),f[r].m(e,null),o=!0,i||(s=[ce(e,"longtap",_),ce(e,"click",T)],i=!0)},p(A,w){n=A;let N=r;r=u(n),r===N?f[r].p(n,w):(G(),d(f[N],1,1,()=>{f[N]=null}),J(),t=f[r],t?t.p(n,w):(t=f[r]=c[r](n),t.c()),m(t,1),t.m(e,null)),(!o||w&3&&l!==(l="tab board-"+n[9].id+" "+(n[9].id==n[1]?"selected":"inactive")+" svelte-1bguyup"))&&S(e,"class",l)},i(A){o||(m(t),o=!0)},o(A){d(t),o=!1},d(A){A&&p(e),f[r].d(),i=!1,Le(s)}}}function aa(n){let e,r,t,a=n[0],l=[];for(let u=0;u<a.length;u+=1)l[u]=kt(bt(n,a,u));const o=u=>d(l[u],1,1,()=>{l[u]=null}),i=n[4].default,s=et(i,n,n[7],null),c=n[4].right,f=et(c,n,n[7],ht);return{c(){for(let u=0;u<l.length;u+=1)l[u].c();e=z(),s&&s.c(),r=z(),f&&f.c()},l(u){for(let _=0;_<l.length;_+=1)l[_].l(u);e=O(u),s&&s.l(u),r=O(u),f&&f.l(u)},m(u,_){for(let T=0;T<l.length;T+=1)l[T].m(u,_);E(u,e,_),s&&s.m(u,_),E(u,r,_),f&&f.m(u,_),t=!0},p(u,_){if(_&11){a=u[0];let T;for(T=0;T<a.length;T+=1){const A=bt(u,a,T);l[T]?(l[T].p(A,_),m(l[T],1)):(l[T]=kt(A),l[T].c(),m(l[T],1),l[T].m(e.parentNode,e))}for(G(),T=a.length;T<l.length;T+=1)o(T);J()}s&&s.p&&(!t||_&128)&&tt(s,i,u,u[7],t?at(i,u[7],_,null):rt(u[7]),null),f&&f.p&&(!t||_&128)&&tt(f,c,u,u[7],t?at(c,u[7],_,Zr):rt(u[7]),ht)},i(u){if(!t){for(let _=0;_<a.length;_+=1)m(l[_]);m(s,u),m(f,u),t=!0}},o(u){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)d(l[_]);d(s,u),d(f,u),t=!1},d(u){Ve(l,u),u&&p(e),s&&s.d(u),u&&p(r),f&&f.d(u)}}}function la(n){let e,r,t,a;const l=[ea,xr],o=[];function i(s,c){return s[0].length===1?0:1}return e=i(n),r=o[e]=l[e](n),{c(){r.c(),t=pe()},l(s){r.l(s),t=pe()},m(s,c){o[e].m(s,c),E(s,t,c),a=!0},p(s,[c]){let f=e;e=i(s),e===f?o[e].p(s,c):(G(),d(o[f],1,1,()=>{o[f]=null}),J(),r=o[e],r?r.p(s,c):(r=o[e]=l[e](s),r.c()),m(r,1),r.m(t.parentNode,t))},i(s){a||(m(r),a=!0)},o(s){d(r),a=!1},d(s){o[e].d(s),s&&p(t)}}}function na(n,e,r){let{$$slots:t={},$$scope:a}=e,{boards:l=[]}=e,{active:o=void 0}=e;const i=Ze(),s={active:null,activeIndex:0,hasTimers:!1};xe(()=>{});const c=u=>{i("longPress",u)},f=u=>{i("tabTap",u)};return n.$$set=u=>{"boards"in u&&r(0,l=u.boards),"active"in u&&r(1,o=u.active),"$$scope"in u&&r(7,a=u.$$scope)},n.$$.update=()=>{n.$$.dirty&3&&l.length&&o&&l.forEach((u,_)=>{u.id==o&&u.id!=="all"&&u.id!=="_timers"&&r(2,s.activeIndex=_,s)})},[l,o,s,i,t,c,f,a]}class vt extends ke{constructor(e){super();ve(this,e,na,la,we,{boards:0,active:1})}}function wt(n,e,r){const t=n.slice();return t[27]=e[r],t}function Tt(n,e,r){const t=n.slice();return t[27]=e[r],t}function St(n,e,r){const t=n.slice();return t[27]=e[r],t}function sa(n){let e,r,t,a=n[0],l=[];for(let s=0;s<a.length;s+=1)l[s]=Nt(wt(n,a,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});let i=!n[2]&&Dt(n);return{c(){e=y("div");for(let s=0;s<l.length;s+=1)l[s].c();r=z(),i&&i.c(),this.h()},l(s){e=L(s,"DIV",{class:!0});var c=I(e);for(let f=0;f<l.length;f+=1)l[f].l(c);r=O(c),i&&i.l(c),c.forEach(p),this.h()},h(){S(e,"class","trackers n-grid")},m(s,c){E(s,e,c);for(let f=0;f<l.length;f+=1)l[f].m(e,null);D(e,r),i&&i.m(e,null),t=!0},p(s,c){if(c[0]&1953){a=s[0];let f;for(f=0;f<a.length;f+=1){const u=wt(s,a,f);l[f]?(l[f].p(u,c),m(l[f],1)):(l[f]=Nt(u),l[f].c(),m(l[f],1),l[f].m(e,r))}for(G(),f=a.length;f<l.length;f+=1)o(f);J()}s[2]?i&&(G(),d(i,1,1,()=>{i=null}),J()):i?(i.p(s,c),c[0]&4&&m(i,1)):(i=Dt(s),i.c(),m(i,1),i.m(e,null))},i(s){if(!t){for(let c=0;c<a.length;c+=1)m(l[c]);m(i),t=!0}},o(s){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)d(l[c]);d(i),t=!1},d(s){s&&p(e),Ve(l,s),i&&i.d()}}}function oa(n){let e,r,t,a=n[0],l=[];for(let s=0;s<a.length;s+=1)l[s]=Bt(Tt(n,a,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});let i=!n[2]&&It(n);return{c(){e=y("div");for(let s=0;s<l.length;s+=1)l[s].c();r=z(),i&&i.c(),this.h()},l(s){e=L(s,"DIV",{class:!0});var c=I(e);for(let f=0;f<l.length;f+=1)l[f].l(c);r=O(c),i&&i.l(c),c.forEach(p),this.h()},h(){S(e,"class","item-grid")},m(s,c){E(s,e,c);for(let f=0;f<l.length;f+=1)l[f].m(e,null);D(e,r),i&&i.m(e,null),t=!0},p(s,c){if(c[0]&1779){a=s[0];let f;for(f=0;f<a.length;f+=1){const u=Tt(s,a,f);l[f]?(l[f].p(u,c),m(l[f],1)):(l[f]=Bt(u),l[f].c(),m(l[f],1),l[f].m(e,r))}for(G(),f=a.length;f<l.length;f+=1)o(f);J()}s[2]?i&&(G(),d(i,1,1,()=>{i=null}),J()):i?(i.p(s,c),c[0]&4&&m(i,1)):(i=It(s),i.c(),m(i,1),i.m(e,null))},i(s){if(!t){for(let c=0;c<a.length;c+=1)m(l[c]);m(i),t=!0}},o(s){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)d(l[c]);d(i),t=!1},d(s){s&&p(e),Ve(l,s),i&&i.d()}}}function ia(n){let e,r,t,a=n[0],l=[];for(let s=0;s<a.length;s+=1)l[s]=Vt(St(n,a,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});let i=!n[2]&&zt(n);return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=z(),i&&i.c(),r=pe()},l(s){for(let c=0;c<l.length;c+=1)l[c].l(s);e=O(s),i&&i.l(s),r=pe()},m(s,c){for(let f=0;f<l.length;f+=1)l[f].m(s,c);E(s,e,c),i&&i.m(s,c),E(s,r,c),t=!0},p(s,c){if(c[0]&1651){a=s[0];let f;for(f=0;f<a.length;f+=1){const u=St(s,a,f);l[f]?(l[f].p(u,c),m(l[f],1)):(l[f]=Vt(u),l[f].c(),m(l[f],1),l[f].m(e.parentNode,e))}for(G(),f=a.length;f<l.length;f+=1)o(f);J()}s[2]?i&&(G(),d(i,1,1,()=>{i=null}),J()):i?(i.p(s,c),c[0]&4&&m(i,1)):(i=zt(s),i.c(),m(i,1),i.m(r.parentNode,r))},i(s){if(!t){for(let c=0;c<a.length;c+=1)m(l[c]);m(i),t=!0}},o(s){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)d(l[c]);d(i),t=!1},d(s){Ve(l,s),s&&p(e),i&&i.d(s),s&&p(r)}}}function Nt(n){let e,r;function t(...o){return n[19](n[27],...o)}function a(...o){return n[20](n[27],...o)}function l(){return n[21](n[27])}return e=new ft({props:{tracker:n[27],className:"tracker-board-button",id:"tracker-"+n[27].tag,value:n[9](n[27]),hoursUsed:n[7](n[27]),positivity:n[8](n[27])}}),e.$on("longpress",t),e.$on("click",a),e.$on("more",l),{c(){h(e.$$.fragment)},l(o){b(e.$$.fragment,o)},m(o,i){k(e,o,i),r=!0},p(o,i){n=o;const s={};i[0]&1&&(s.tracker=n[27]),i[0]&1&&(s.id="tracker-"+n[27].tag),i[0]&1&&(s.value=n[9](n[27])),i[0]&1&&(s.hoursUsed=n[7](n[27])),i[0]&1&&(s.positivity=n[8](n[27])),e.$set(s)},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){v(e,o)}}}function Dt(n){let e,r;return e=new ft({props:{hideMore:!0,tracker:{tag:"add",label:`${R.t("tracker.add-tracker","Add Tracker")}`,emoji:"\u2795"}}}),e.$on("click",n[22]),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Et(n){let e,r;return e=new ut({props:{started:n[27].started,color:n[27].color}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[0]&1&&(l.started=t[27].started),a[0]&1&&(l.color=t[27].color),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function ca(n){let e,r,t=n[27].started&&Et(n);return{c(){e=y("div"),t&&t.c(),this.h()},l(a){e=L(a,"DIV",{slot:!0});var l=I(e);t&&t.l(l),l.forEach(p),this.h()},h(){S(e,"slot","subtitle")},m(a,l){E(a,e,l),t&&t.m(e,null),r=!0},p(a,l){a[27].started?t?(t.p(a,l),l[0]&1&&m(t,1)):(t=Et(a),t.c(),m(t,1),t.m(e,null)):t&&(G(),d(t,1,1,()=>{t=null}),J())},i(a){r||(m(t),r=!0)},o(a){d(t),r=!1},d(a){a&&p(e),t&&t.d()}}}function Bt(n){let e,r;function t(){return n[15](n[27])}function a(){return n[16](n[27])}function l(){return n[17](n[27])}return e=new pt({props:{id:"tracker-"+n[27].tag,compact:n[4].localSettings.compactButtons,title:n[27].label,hoursUsed:n[7](n[27]),subtitle:n[27].started?null:n[6](n[27]),emoji:n[27].emoji,value:n[9](n[27]),oneTap:n[27].one_tap,color:n[27].color,className:"tracker-"+n[27].tag+" tracker-board-button",hideMore:n[1],$$slots:{subtitle:[ca]},$$scope:{ctx:n}}}),e.$on("longpress",t),e.$on("click",a),e.$on("more",l),{c(){h(e.$$.fragment)},l(o){b(e.$$.fragment,o)},m(o,i){k(e,o,i),r=!0},p(o,i){n=o;const s={};i[0]&1&&(s.id="tracker-"+n[27].tag),i[0]&16&&(s.compact=n[4].localSettings.compactButtons),i[0]&1&&(s.title=n[27].label),i[0]&1&&(s.hoursUsed=n[7](n[27])),i[0]&1&&(s.subtitle=n[27].started?null:n[6](n[27])),i[0]&1&&(s.emoji=n[27].emoji),i[0]&1&&(s.value=n[9](n[27])),i[0]&1&&(s.oneTap=n[27].one_tap),i[0]&1&&(s.color=n[27].color),i[0]&1&&(s.className="tracker-"+n[27].tag+" tracker-board-button"),i[0]&2&&(s.hideMore=n[1]),i[0]&1|i[1]&8&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){v(e,o)}}}function It(n){let e,r;return e=new pt({props:{compact:n[4].localSettings.compactButtons,title:R.t("tracker.add-tracker","Add Tracker"),emoji:"\u2795",className:"tracker-add",hideMore:!0}}),e.$on("click",n[18]),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[0]&16&&(l.compact=t[4].localSettings.compactButtons),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function yt(n){let e,r=(n[6](n[27])||void 0)+"",t;return{c(){e=y("p"),t=te(r),this.h()},l(a){e=L(a,"P",{class:!0});var l=I(e);t=re(l,r),l.forEach(p),this.h()},h(){S(e,"class","text-xs text-gray-500")},m(a,l){E(a,e,l),D(e,t)},p(a,l){l[0]&1&&r!==(r=(a[6](a[27])||void 0)+"")&&_e(t,r)},d(a){a&&p(e)}}}function fa(n){let e,r,t,a,l=n[27].label+"",o,i,s=n[6](n[27]),c=s&&yt(n);return{c(){e=y("div"),r=z(),t=y("main"),a=y("h3"),o=te(l),i=z(),c&&c.c(),this.h()},l(f){e=L(f,"DIV",{class:!0,style:!0}),I(e).forEach(p),r=O(f),t=L(f,"MAIN",{});var u=I(t);a=L(u,"H3",{class:!0});var _=I(a);o=re(_,l),_.forEach(p),i=O(u),c&&c.l(u),u.forEach(p),this.h()},h(){S(e,"class","highlight"),De(e,"background-color",n[27].color),S(a,"class","font-bold text-black dark:text-white line-clamp-1")},m(f,u){E(f,e,u),E(f,r,u),E(f,t,u),D(t,a),D(a,o),D(t,i),c&&c.m(t,null)},p(f,u){u[0]&1&&De(e,"background-color",f[27].color),u[0]&1&&l!==(l=f[27].label+"")&&_e(o,l),u[0]&1&&(s=f[6](f[27])),s?c?c.p(f,u):(c=yt(f),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(f){f&&p(e),f&&p(r),f&&p(t),c&&c.d()}}}function ua(n){let e,r,t;return r=new or({props:{emoji:n[27].emoji,label:n[27].label,size:n[4].localSettings.compactButtons?30:40}}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{slot:!0,class:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"slot","left"),S(e,"class","flex pr-0 justify-content-center")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p(a,l){const o={};l[0]&1&&(o.emoji=a[27].emoji),l[0]&1&&(o.label=a[27].label),l[0]&16&&(o.size=a[4].localSettings.compactButtons?30:40),r.$set(o)},i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function ma(n){let e=(n[9](n[27])||"")+"",r;return{c(){r=te(e)},l(t){r=re(t,e)},m(t,a){E(t,r,a)},p(t,a){a[0]&1&&e!==(e=(t[9](t[27])||"")+"")&&_e(r,e)},d(t){t&&p(r)}}}function Lt(n){let e,r;return e=new ut({props:{started:n[27].started,className:"text-lg",color:n[27].color}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[0]&1&&(l.started=t[27].started),a[0]&1&&(l.color=t[27].color),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function At(n){let e,r;function t(...a){return n[11](n[27],...a)}return e=new $e({props:{shape:"round",className:"bg-gray-100 dark:bg-black text-primary-500",size:"sm",style:"z-index:1000",$$slots:{default:[$a]},$$scope:{ctx:n}}}),e.$on("click",t),{c(){h(e.$$.fragment)},l(a){b(e.$$.fragment,a)},m(a,l){k(e,a,l),r=!0},p(a,l){n=a;const o={};l[1]&8&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(a){r||(m(e.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),r=!1},d(a){v(e,a)}}}function $a(n){let e,r;return e=new ie({props:{name:"more",size:18,className:"prevent fill-inverse-1"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function da(n){let e,r,t,a,l;r=new Re({props:{$$slots:{default:[ma]},$$scope:{ctx:n}}});let o=n[27].started&&Lt(n),i=!n[1]&&At(n);return{c(){e=y("span"),h(r.$$.fragment),t=z(),o&&o.c(),a=z(),i&&i.c(),this.h()},l(s){e=L(s,"SPAN",{slot:!0,class:!0});var c=I(e);b(r.$$.fragment,c),t=O(c),o&&o.l(c),a=O(c),i&&i.l(c),c.forEach(p),this.h()},h(){S(e,"slot","right"),S(e,"class","flex items-center mr-2 space-x-4")},m(s,c){E(s,e,c),k(r,e,null),D(e,t),o&&o.m(e,null),D(e,a),i&&i.m(e,null),l=!0},p(s,c){const f={};c[0]&1|c[1]&8&&(f.$$scope={dirty:c,ctx:s}),r.$set(f),s[27].started?o?(o.p(s,c),c[0]&1&&m(o,1)):(o=Lt(s),o.c(),m(o,1),o.m(e,a)):o&&(G(),d(o,1,1,()=>{o=null}),J()),s[1]?i&&(G(),d(i,1,1,()=>{i=null}),J()):i?(i.p(s,c),c[0]&2&&m(i,1)):(i=At(s),i.c(),m(i,1),i.m(e,null))},i(s){l||(m(r.$$.fragment,s),m(o),m(i),l=!0)},o(s){d(r.$$.fragment,s),d(o),d(i),l=!1},d(s){s&&p(e),v(r),o&&o.d(),i&&i.d()}}}function Vt(n){let e,r;function t(...l){return n[12](n[27],...l)}function a(...l){return n[13](n[27],...l)}return e=new Me({props:{id:"tracker-"+n[27].tag,clickable:!0,style:"--tracker-color:"+n[27].color,className:"tracker-board-button tracker-"+n[27].tag+` py-2
      tracker-list-item flex-shrink-off `+(He.truthy(n[9](n[27]))?"has-value":"no-value"),compact:n[4].localSettings.compactButtons,$$slots:{right:[da],left:[ua],default:[fa]},$$scope:{ctx:n}}}),e.$on("longtap",t),e.$on("click",a),{c(){h(e.$$.fragment)},l(l){b(e.$$.fragment,l)},m(l,o){k(e,l,o),r=!0},p(l,o){n=l;const i={};o[0]&1&&(i.id="tracker-"+n[27].tag),o[0]&1&&(i.style="--tracker-color:"+n[27].color),o[0]&1&&(i.className="tracker-board-button tracker-"+n[27].tag+` py-2
      tracker-list-item flex-shrink-off `+(He.truthy(n[9](n[27]))?"has-value":"no-value")),o[0]&16&&(i.compact=n[4].localSettings.compactButtons),o[0]&19|o[1]&8&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(l){r||(m(e.$$.fragment,l),r=!0)},o(l){d(e.$$.fragment,l),r=!1},d(l){v(e,l)}}}function zt(n){let e,r;return e=new Me({props:{compact:n[4].localSettings.compactButtons,clickable:!0,title:R.t("tracker.add-tracker","Add Tracker"),className:"tracker-add py-3 tracker-list-item flex-shrink-off no-value",$$slots:{left:[ga]},$$scope:{ctx:n}}}),e.$on("click",n[14]),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[0]&16&&(l.compact=t[4].localSettings.compactButtons),a[0]&16|a[1]&8&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function pa(n){let e;return{c(){e=te("\u2795")},l(r){e=re(r,"\u2795")},m(r,t){E(r,e,t)},d(r){r&&p(e)}}}function ga(n){let e,r,t;return r=new Re({props:{style:"width:40px;",center:!0,size:n[4].localSettings.compactButtons?"xl":"xxl",$$slots:{default:[pa]},$$scope:{ctx:n}}}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{slot:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"slot","left")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p(a,l){const o={};l[0]&16&&(o.size=a[4].localSettings.compactButtons?"xl":"xxl"),l[1]&8&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function _a(n){let e,r,t,a;const l=[ia,oa,sa],o=[];function i(s,c){return s[3]=="list"?0:s[3]==="detail"?1:s[3]=="button"?2:-1}return~(e=i(n))&&(r=o[e]=l[e](n)),{c(){r&&r.c(),t=pe()},l(s){r&&r.l(s),t=pe()},m(s,c){~e&&o[e].m(s,c),E(s,t,c),a=!0},p(s,c){let f=e;e=i(s),e===f?~e&&o[e].p(s,c):(r&&(G(),d(o[f],1,1,()=>{o[f]=null}),J()),~e?(r=o[e],r?r.p(s,c):(r=o[e]=l[e](s),r.c()),m(r,1),r.m(t.parentNode,t)):r=null)},i(s){a||(m(r),a=!0)},o(s){d(r),a=!1},d(s){~e&&o[e].d(s),s&&p(t)}}}function ha(n,e,r){let t,a,l,o;fe(n,he,$=>r(23,t=$)),fe(n,Te,$=>r(24,a=$)),fe(n,it,$=>r(25,l=$)),fe(n,Ee,$=>r(4,o=$));const i=Ze();let{trackers:s}=e,{hideMore:c=!1}=e,{hideAdd:f=!1}=e,{view:u=localStorage.getItem("board-view")||"detail"}=e;function _($){if(l[$.tag])return ct.fromNow(l[$.tag].date)}function T($){return a.today.hasOwnProperty($.tag)?a.today[$.tag].hours:[]}function A($){let V=w($,!1);return V=V||0,nr(V,$)}function w($,V=!0){let F=null;return a.today.hasOwnProperty($.tag)&&($.math==="sum"?F=Oe.round(Oe.sum(a.today[$.tag].values)):F=Oe.round(Oe.average(a.today[$.tag].values))),F===0&&(F="0"),V&&He.truthy(F)?F?sr.format(F,$.uom):null:F}function N($){return ee(this,null,function*(){let V;if($.type=="timer")if($.started){const F=(new Date().getTime()-$.started)/1e3;V=$.toNoteString(F),he.stopTimer($)}else he.startTimer($);else $.type!=="note"&&$.type!=="picker"&&(V=$.toNoteString());return V&&V.length?(Q.addElement(V),yield Te.saveLog(Q.asLog()),yield Q.clear()):$.type!=="timer"&&se.trackerTap($,t.trackers),!1})}const C=($,V)=>{i("more",$)},W=($,V)=>{N($)},Z=($,V)=>{["svg"].indexOf(V.detail.target.tagName)==-1&&i("tap",$)},Y=()=>i("add"),U=$=>{N($)},x=$=>{i("tap",$)},M=$=>{i("more",$)},j=()=>{i("add")},ae=($,V)=>{N($)},q=($,V)=>{i("tap",$)},K=$=>{i("more",$)},oe=$=>{i("add",$)};return n.$$set=$=>{"trackers"in $&&r(0,s=$.trackers),"hideMore"in $&&r(1,c=$.hideMore),"hideAdd"in $&&r(2,f=$.hideAdd),"view"in $&&r(3,u=$.view)},[s,c,f,u,o,i,_,T,A,w,N,C,W,Z,Y,U,x,M,j,ae,q,K,oe]}class Ot extends ke{constructor(e){super();ve(this,e,ha,_a,we,{trackers:0,hideMore:1,hideAdd:2,view:3},null,[-1,-1])}}function Mt(n){let e,r;return e=new Me({props:{"bottom-line":!0,className:"bottom-line",$$slots:{right:[Ta],left:[va],default:[ka]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a&96&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function ba(n){let e=n[5].label+"",r;return{c(){r=te(e)},l(t){r=re(t,e)},m(t,a){E(t,r,a)},p(t,a){a&32&&e!==(e=t[5].label+"")&&_e(r,e)},d(t){t&&p(r)}}}function ka(n){let e,r;return e=new Re({props:{size:"lg",$$slots:{default:[ba]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a&96&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function va(n){let e,r,t;return r=new ie({props:{name:"menu"}}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{slot:!0,class:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"slot","left"),S(e,"class","menu-handle")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p:H,i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function wa(n){let e,r;return e=new ie({props:{name:"remove"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ta(n){let e,r,t;function a(){return n[3](n[5])}return r=new $e({props:{icon:!0,className:"text-red",$$slots:{default:[wa]},$$scope:{ctx:n}}}),r.$on("click",a),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(l){e=L(l,"DIV",{slot:!0,class:!0});var o=I(e);b(r.$$.fragment,o),o.forEach(p),this.h()},h(){S(e,"slot","right"),S(e,"class","flex-shrink-off")},m(l,o){E(l,e,o),k(r,e,null),t=!0},p(l,o){n=l;const i={};o&64&&(i.$$scope={dirty:o,ctx:n}),r.$set(i)},i(l){t||(m(r.$$.fragment,l),t=!0)},o(l){d(r.$$.fragment,l),t=!1},d(l){l&&p(e),v(r)}}}function Sa(n){let e,r,t=n[5].label!=="all"&&Mt(n);return{c(){t&&t.c(),e=pe()},l(a){t&&t.l(a),e=pe()},m(a,l){t&&t.m(a,l),E(a,e,l),r=!0},p(a,l){a[5].label!=="all"?t?(t.p(a,l),l&32&&m(t,1)):(t=Mt(a),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(G(),d(t,1,1,()=>{t=null}),J())},i(a){r||(m(t),r=!0)},o(a){d(t),r=!1},d(a){t&&t.d(a),a&&p(e)}}}function Na(n){let e,r,t;function a(o){n[4](o)}let l={handle:".menu-handle",key:"label",$$slots:{default:[Sa,({item:o})=>({5:o}),({item:o})=>o?32:0]},$$scope:{ctx:n}};return n[0].boards!==void 0&&(l.items=n[0].boards),e=new fr({props:l}),Ae.push(()=>Ce(e,"items",a)),e.$on("update",n[1]),{c(){h(e.$$.fragment)},l(o){b(e.$$.fragment,o)},m(o,i){k(e,o,i),t=!0},p(o,i){const s={};i&96&&(s.$$scope={dirty:i,ctx:o}),!r&&i&1&&(r=!0,s.items=o[0].boards,Ye(()=>r=!1)),e.$set(s)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function Da(n){let e,r;return e=new ir({props:{className:"board-sort",$$slots:{default:[Na]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a&65&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ea(n){let e,r,t;return r=new ur({props:{back:se.toggleBoardSorter}}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{slot:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"slot","left")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p:H,i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function Ba(n){let e,r=R.t("board.organize-tabs","Organize Tabs")+"",t;return{c(){e=y("div"),t=te(r),this.h()},l(a){e=L(a,"DIV",{slot:!0});var l=I(e);t=re(l,r),l.forEach(p),this.h()},h(){S(e,"slot","main")},m(a,l){E(a,e,l),D(e,t)},p:H,d(a){a&&p(e)}}}function Ia(n){let e;return{c(){e=y("div"),this.h()},l(r){e=L(r,"DIV",{slot:!0}),I(e).forEach(p),this.h()},h(){S(e,"slot","right")},m(r,t){E(r,e,t)},d(r){r&&p(e)}}}function ya(n){let e,r,t;return r=new cr({props:{$$slots:{right:[Ia],main:[Ba],left:[Ea]},$$scope:{ctx:n}}}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{slot:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"slot","header")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p(a,l){const o={};l&64&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function La(n){let e,r;return e=new mt({props:{type:"fullscreen",allowClose:!0,$$slots:{header:[ya],default:[Da]},$$scope:{ctx:n}}}),e.$on("close",se.toggleBoardSorter),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,[a]){const l={};a&65&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Aa(n,e,r){let t;fe(n,ue,s=>r(0,t=s));function a(s){s.detail instanceof Array&&(ge(ue,t.boards=s.detail,t),ue.save(t.boards))}function l(s){return ee(this,null,function*(){(yield se.confirm("Delete "+s.label+" tab?","You can recreate it later, but it's not super easy."))===!0&&(yield ue.deleteBoard(s.id),se.toast("Deleted"))})}const o=s=>{l(s)};function i(s){n.$$.not_equal(t.boards,s)&&(t.boards=s,ue.set(t))}return[t,a,l,o,i]}class Va extends ke{constructor(e){super();ve(this,e,Aa,La,we,{})}}const Ie={};Ie.packs={default:mr};Ie.methods={asArray(n){return Object.keys(Ie.packs).map(e=>{let r=Ie.packs[e];return r.key=e,r})}};var za=["Tap the tracker button to start a log","Press and hold a tracker to automatically save a log using the trackers default","Want dashboards and people tracking? Enable them in the Settings","Tap the \u2022\u2022\u2022 in the 'What's Up' field to change the location, date and score","The History tab shows you everything you've done","Enable location tracking, Dashboards and People Tracking in Settings","Tap the Tab icon in the upper right to enable Tracker Tabs","You can manually track by writing a note in the What's Up field. For example: Today is awesome! #mood(8) with @brandon","Use @username in notes to tag people","Include +context to add additional context to your log","Import data from places like IFTTT. Tap Settings, then LeLo API","Want to support LeLo? Check out our Patreon (link in settings)"];function jt(n){let e,r;return e=new $e({props:{icon:!0,size:"xs",className:"mr-1 bg-red-500 text-white animate-pulse",ariaLabel:R.t("general.timers","Timers"),$$slots:{default:[Oa]},$$scope:{ctx:n}}}),e.$on("click",he.toggleTimers),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[1]&8&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Oa(n){let e,r;return e=new ie({props:{name:"time",size:24,className:"fill-red"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ma(n){let e,r;return e=new ie({props:{name:"search",className:"text-primary-500",size:24}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function ja(n){let e,r;return e=new ie({props:{icon:Xt,className:"text-primary-500",size:24}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ca(n){let e,r,t,a,l,o,i,s=n[1].timers.length&&jt(n);return r=new $e({props:{icon:!0,ariaLabel:R.t("general.search"),$$slots:{default:[Ma]},$$scope:{ctx:n}}}),r.$on("click",n[14].toggleSearch),a=new vt({props:{boards:n[14].injectAllBoard(n[10].boards||[]),active:n[10].active}}),a.$on("create",n[14].newBoard),a.$on("longPress",n[22]),a.$on("tabTap",n[23]),o=new $e({props:{icon:!0,className:"board-option-action text-primary-500",ariaLabel:R.t("general.settings","Settings"),$$slots:{default:[ja]},$$scope:{ctx:n}}}),o.$on("click",n[24]),{c(){s&&s.c(),e=z(),h(r.$$.fragment),t=z(),h(a.$$.fragment),l=z(),h(o.$$.fragment)},l(c){s&&s.l(c),e=O(c),b(r.$$.fragment,c),t=O(c),b(a.$$.fragment,c),l=O(c),b(o.$$.fragment,c)},m(c,f){s&&s.m(c,f),E(c,e,f),k(r,c,f),E(c,t,f),k(a,c,f),E(c,l,f),k(o,c,f),i=!0},p(c,f){c[1].timers.length?s?(s.p(c,f),f[0]&2&&m(s,1)):(s=jt(c),s.c(),m(s,1),s.m(e.parentNode,e)):s&&(G(),d(s,1,1,()=>{s=null}),J());const u={};f[1]&8&&(u.$$scope={dirty:f,ctx:c}),r.$set(u);const _={};f[0]&1024&&(_.boards=c[14].injectAllBoard(c[10].boards||[])),f[0]&1024&&(_.active=c[10].active),a.$set(_);const T={};f[1]&8&&(T.$$scope={dirty:f,ctx:c}),o.$set(T)},i(c){i||(m(s),m(r.$$.fragment,c),m(a.$$.fragment,c),m(o.$$.fragment,c),i=!0)},o(c){d(s),d(r.$$.fragment,c),d(a.$$.fragment,c),d(o.$$.fragment,c),i=!1},d(c){s&&s.d(c),c&&p(e),v(r,c),c&&p(t),v(a,c),c&&p(l),v(o,c)}}}function Ya(n){let e,r;return e=new kr({props:{$$slots:{default:[Ca]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[0]&1026|a[1]&8&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Pa(n){let e,r,t;return r=new ze({props:{$$slots:{default:[Ya]},$$scope:{ctx:n}}}),{c(){e=y("header"),h(r.$$.fragment),this.h()},l(a){e=L(a,"HEADER",{slot:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"slot","header")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p(a,l){const o={};l[0]&1026|l[1]&8&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function Ct(n){let e,r,t,a;return{c(){e=y("div"),r=te(`\u26A0\uFE0F Blockstack Storage is deprecated.
        `),t=y("a"),a=te("Learn More"),this.h()},l(l){e=L(l,"DIV",{class:!0});var o=I(e);r=re(o,`\u26A0\uFE0F Blockstack Storage is deprecated.
        `),t=L(o,"A",{href:!0});var i=I(t);a=re(i,"Learn More"),i.forEach(p),o.forEach(p),this.h()},h(){S(t,"href","https://nomie.app/tutorials/blockstack-storage"),S(e,"class","my-1 blockstack-warning")},m(l,o){E(l,e,o),D(e,r),D(e,t),D(t,a)},d(l){l&&p(e)}}}function Yt(n){let e,r,t,a;const l=[Ha,Ua],o=[];function i(s,c){return s[8].done?1:0}return e=i(n),r=o[e]=l[e](n),{c(){r.c(),t=pe()},l(s){r.l(s),t=pe()},m(s,c){o[e].m(s,c),E(s,t,c),a=!0},p(s,c){let f=e;e=i(s),e===f?o[e].p(s,c):(G(),d(o[f],1,1,()=>{o[f]=null}),J(),r=o[e],r?r.p(s,c):(r=o[e]=l[e](s),r.c()),m(r,1),r.m(t.parentNode,t))},i(s){a||(m(r),a=!0)},o(s){d(r),a=!1},d(s){o[e].d(s),s&&p(t)}}}function Ua(n){let e,r,t,a,l,o,i,s=n[5]>6&&n[2].launchCount>10&&n[2].storageType=="local"&&n[2].meta.hideBackup==!1&&Pt(n),c=n[1].showTimers&&n[1].timers.length&&Ut(n);t=new ze({props:{size:"xl",className:"",$$slots:{default:[Ja]},$$scope:{ctx:n}}});let f=(n[3]||n[4]||[]).length&&Rt(n);return o=new Vr({props:{tips:za}}),{c(){s&&s.c(),e=z(),c&&c.c(),r=z(),h(t.$$.fragment),a=z(),f&&f.c(),l=z(),h(o.$$.fragment)},l(u){s&&s.l(u),e=O(u),c&&c.l(u),r=O(u),b(t.$$.fragment,u),a=O(u),f&&f.l(u),l=O(u),b(o.$$.fragment,u)},m(u,_){s&&s.m(u,_),E(u,e,_),c&&c.m(u,_),E(u,r,_),k(t,u,_),E(u,a,_),f&&f.m(u,_),E(u,l,_),k(o,u,_),i=!0},p(u,_){u[5]>6&&u[2].launchCount>10&&u[2].storageType=="local"&&u[2].meta.hideBackup==!1?s?(s.p(u,_),_[0]&36&&m(s,1)):(s=Pt(u),s.c(),m(s,1),s.m(e.parentNode,e)):s&&(G(),d(s,1,1,()=>{s=null}),J()),u[1].showTimers&&u[1].timers.length?c?(c.p(u,_),_[0]&2&&m(c,1)):(c=Ut(u),c.c(),m(c,1),c.m(r.parentNode,r)):c&&(G(),d(c,1,1,()=>{c=null}),J());const T={};_[0]&152|_[1]&8&&(T.$$scope={dirty:_,ctx:u}),t.$set(T),(u[3]||u[4]||[]).length?f?(f.p(u,_),_[0]&24&&m(f,1)):(f=Rt(u),f.c(),m(f,1),f.m(l.parentNode,l)):f&&(G(),d(f,1,1,()=>{f=null}),J())},i(u){i||(m(s),m(c),m(t.$$.fragment,u),m(f),m(o.$$.fragment,u),i=!0)},o(u){d(s),d(c),d(t.$$.fragment,u),d(f),d(o.$$.fragment,u),i=!1},d(u){s&&s.d(u),u&&p(e),c&&c.d(u),u&&p(r),v(t,u),u&&p(a),f&&f.d(u),u&&p(l),v(o,u)}}}function Ha(n){let e,r,t;return r=new st({}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{class:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"class","empty-notice")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p:H,i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function Pt(n){let e,r,t,a,l,o,i=R.t("general.backup-now","Backup Now")+"",s,c,f,u;const _=[Fa,Ra],T=[];function A(w,N){return w[5]>1e3?0:1}return t=A(n),a=T[t]=_[t](n),{c(){e=y("div"),r=y("button"),a.c(),l=z(),o=y("div"),s=te(i),this.h()},l(w){e=L(w,"DIV",{class:!0});var N=I(e);r=L(N,"BUTTON",{"aria-label":!0,class:!0});var C=I(r);a.l(C),l=O(C),o=L(C,"DIV",{class:!0});var W=I(o);s=re(W,i),W.forEach(p),C.forEach(p),N.forEach(p),this.h()},h(){S(o,"class","ml-2 font-bold text-black dark:text-white"),S(r,"aria-label","Backup your data"),S(r,"class","flex items-center px-3 py-2 mb-2 text-sm text-center bg-gray-400 rounded-full backup dark:bg-black dark:text-white bg-opacity-20"),S(e,"class","flex items-center justify-center container-sm")},m(w,N){E(w,e,N),D(e,r),T[t].m(r,null),D(r,l),D(r,o),D(o,s),c=!0,f||(u=ce(r,"click",Dr),f=!0)},p(w,N){let C=t;t=A(w),t===C?T[t].p(w,N):(G(),d(T[C],1,1,()=>{T[C]=null}),J(),a=T[t],a?a.p(w,N):(a=T[t]=_[t](w),a.c()),m(a,1),a.m(r,l))},i(w){c||(m(a),c=!0)},o(w){d(a),c=!1},d(w){w&&p(e),T[t].d(),f=!1,u()}}}function Ra(n){let e,r,t;return{c(){e=y("div"),r=te(n[5]),t=te(" days since last backup")},l(a){e=L(a,"DIV",{});var l=I(e);r=re(l,n[5]),t=re(l," days since last backup"),l.forEach(p)},m(a,l){E(a,e,l),D(e,r),D(e,t)},p(a,l){l[0]&32&&_e(r,a[5])},i:H,o:H,d(a){a&&p(e)}}}function Fa(n){let e,r,t,a=R.t("general.no-known-backups","No recent backups")+"",l,o;return r=new ie({props:{name:"bell",size:12}}),{c(){e=y("div"),h(r.$$.fragment),t=z(),l=te(a),this.h()},l(i){e=L(i,"DIV",{class:!0});var s=I(e);b(r.$$.fragment,s),t=O(s),l=re(s,a),s.forEach(p),this.h()},h(){S(e,"class","opacity-60")},m(i,s){E(i,e,s),k(r,e,null),D(e,t),D(e,l),o=!0},p:H,i(i){o||(m(r.$$.fragment,i),o=!0)},o(i){d(r.$$.fragment,i),o=!1},d(i){i&&p(e),v(r)}}}function Ut(n){let e,r;return e=new ze({props:{className:"px-2 lg:px-4 mb-5",$$slots:{default:[Xa]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[0]&512|a[1]&8&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function qa(n){let e,r;return{c(){e=y("div"),r=te("Running Timers"),this.h()},l(t){e=L(t,"DIV",{class:!0});var a=I(e);r=re(a,"Running Timers"),a.forEach(p),this.h()},h(){S(e,"class","ntitle")},m(t,a){E(t,e,a),D(e,r)},d(t){t&&p(e)}}}function Wa(n){let e,r,t=R.t("general.hide","Hide")+"",a,l,o;return{c(){e=y("div"),r=y("button"),a=te(t),this.h()},l(i){e=L(i,"DIV",{slot:!0});var s=I(e);r=L(s,"BUTTON",{class:!0});var c=I(r);a=re(c,t),c.forEach(p),s.forEach(p),this.h()},h(){S(r,"class","text-sm font-bold text-primary-500"),S(e,"slot","right")},m(i,s){E(i,e,s),D(e,r),D(r,a),l||(o=ce(r,"click",he.toggleTimers),l=!0)},p:H,d(i){i&&p(e),l=!1,o()}}}function Ka(n){let e,r,t,a;return e=new Me({props:{compact:!0,$$slots:{right:[Wa],default:[qa]},$$scope:{ctx:n}}}),t=new Ot({props:{view:"list",trackers:n[9],hideAdd:!0}}),t.$on("tap",n[15]),t.$on("more",n[16]),{c(){h(e.$$.fragment),r=z(),h(t.$$.fragment)},l(l){b(e.$$.fragment,l),r=O(l),b(t.$$.fragment,l)},m(l,o){k(e,l,o),E(l,r,o),k(t,l,o),a=!0},p(l,o){const i={};o[1]&8&&(i.$$scope={dirty:o,ctx:l}),e.$set(i);const s={};o[0]&512&&(s.trackers=l[9]),t.$set(s)},i(l){a||(m(e.$$.fragment,l),m(t.$$.fragment,l),a=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),a=!1},d(l){v(e,l),l&&p(r),v(t,l)}}}function Xa(n){let e,r;return e=new vr({props:{$$slots:{default:[Ka]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[0]&512|a[1]&8&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ht(n){let e,r;return e=new Tr({props:{title:R.t("board.empty-title","This tab is empty"),emoji:"\u{1F914}",description:R.t("board.empty-description","Add from your existing trackers, or browse the library to discover new things to track."),buttonLabel:`${R.t("general.add-a-tracker","Add a Tracker")}...`,buttonClick:n[14].addButtonTap}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ga(n){let e,r,t,a=(n[3]||n[4]||[]).length===0&&Ht(n);return r=new Ot({props:{view:n[7].view,trackers:n[3]||n[4],hideAdd:(n[3]||n[4]||[]).length===0}}),r.$on("tap",n[17]),r.$on("add",n[14].addButtonTap),r.$on("more",n[18]),{c(){a&&a.c(),e=z(),h(r.$$.fragment)},l(l){a&&a.l(l),e=O(l),b(r.$$.fragment,l)},m(l,o){a&&a.m(l,o),E(l,e,o),k(r,l,o),t=!0},p(l,o){(l[3]||l[4]||[]).length===0?a?(a.p(l,o),o[0]&24&&m(a,1)):(a=Ht(l),a.c(),m(a,1),a.m(e.parentNode,e)):a&&(G(),d(a,1,1,()=>{a=null}),J());const i={};o[0]&128&&(i.view=l[7].view),o[0]&24&&(i.trackers=l[3]||l[4]),o[0]&24&&(i.hideAdd=(l[3]||l[4]||[]).length===0),r.$set(i)},i(l){t||(m(a),m(r.$$.fragment,l),t=!0)},o(l){d(a),d(r.$$.fragment,l),t=!1},d(l){a&&a.d(l),l&&p(e),v(r,l)}}}function Ja(n){let e,r,t;return r=new Er({props:{$$slots:{default:[Ga]},$$scope:{ctx:n}}}),r.$on("left",ue.next),r.$on("right",ue.previous),{c(){e=y("main"),h(r.$$.fragment),this.h()},l(a){e=L(a,"MAIN",{style:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){De(e,"min-height","65vh")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p(a,l){const o={};l[0]&152|l[1]&8&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function Rt(n){let e,r,t;return r=new wr({props:{className:"mr-2 box-shadow-tight bg-transparent",$$slots:{default:[el]},$$scope:{ctx:n}}}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{class:!0,style:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"class","flex mt-5 mb-3 board-actions"),De(e,"min-width","100px")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p(a,l){const o={};l[0]&128|l[1]&8&&(o.$$scope={dirty:l,ctx:a}),r.$set(o)},i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function Qa(n){let e,r;return e=new ie({props:{size:18,name:"buttonView"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Za(n){let e,r;return e=new ie({props:{size:18,name:"list"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function xa(n){let e,r;return e=new ie({props:{size:18,name:"detailView"}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function el(n){let e,r,t,a,l,o;return e=new $e({props:{icon:!0,className:`${n[7].view=="button"?"active":"bg-transparent"}`,$$slots:{default:[Qa]},$$scope:{ctx:n}}}),e.$on("click",n[19]),t=new $e({props:{icon:!0,className:`${n[7].view=="list"?"active":"bg-transparent"}`,$$slots:{default:[Za]},$$scope:{ctx:n}}}),t.$on("click",n[20]),l=new $e({props:{icon:!0,className:`${n[7].view=="detail"?"active":"bg-transparent"}`,$$slots:{default:[xa]},$$scope:{ctx:n}}}),l.$on("click",n[21]),{c(){h(e.$$.fragment),r=z(),h(t.$$.fragment),a=z(),h(l.$$.fragment)},l(i){b(e.$$.fragment,i),r=O(i),b(t.$$.fragment,i),a=O(i),b(l.$$.fragment,i)},m(i,s){k(e,i,s),E(i,r,s),k(t,i,s),E(i,a,s),k(l,i,s),o=!0},p(i,s){const c={};s[0]&128&&(c.className=`${i[7].view=="button"?"active":"bg-transparent"}`),s[1]&8&&(c.$$scope={dirty:s,ctx:i}),e.$set(c);const f={};s[0]&128&&(f.className=`${i[7].view=="list"?"active":"bg-transparent"}`),s[1]&8&&(f.$$scope={dirty:s,ctx:i}),t.$set(f);const u={};s[0]&128&&(u.className=`${i[7].view=="detail"?"active":"bg-transparent"}`),s[1]&8&&(u.$$scope={dirty:s,ctx:i}),l.$set(u)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){v(e,i),i&&p(r),v(t,i),i&&p(a),v(l,i)}}}function tl(n){let e,r,t,a,l,o=n[2].storageType=="blockstack"&&Ct();t=new Nr({});let i=n[0]&&Yt(n);return{c(){e=y("div"),o&&o.c(),r=z(),h(t.$$.fragment),a=z(),i&&i.c(),this.h()},l(s){e=L(s,"DIV",{slot:!0,class:!0});var c=I(e);o&&o.l(c),r=O(c),b(t.$$.fragment,c),a=O(c),i&&i.l(c),c.forEach(p),this.h()},h(){S(e,"slot","content"),S(e,"class","pt-4 bg-gray-100 board-container dark:bg-gray-800")},m(s,c){E(s,e,c),o&&o.m(e,null),D(e,r),k(t,e,null),D(e,a),i&&i.m(e,null),l=!0},p(s,c){s[2].storageType=="blockstack"?o||(o=Ct(),o.c(),o.m(e,r)):o&&(o.d(1),o=null),s[0]?i?(i.p(s,c),c[0]&1&&m(i,1)):(i=Yt(s),i.c(),m(i,1),i.m(e,null)):i&&(G(),d(i,1,1,()=>{i=null}),J())},i(s){l||(m(t.$$.fragment,s),m(i),l=!0)},o(s){d(t.$$.fragment,s),d(i),l=!1},d(s){s&&p(e),o&&o.d(),v(t),i&&i.d()}}}function rl(n){let e,r,t,a;return t=new Qr({}),{c(){e=y("div"),r=y("div"),h(t.$$.fragment),this.h()},l(l){e=L(l,"DIV",{slot:!0});var o=I(e);r=L(o,"DIV",{id:!0});var i=I(r);b(t.$$.fragment,i),i.forEach(p),o.forEach(p),this.h()},h(){S(r,"id","note-capture"),S(e,"slot","footer")},m(l,o){E(l,e,o),D(e,r),k(t,r,null),a=!0},i(l){a||(m(t.$$.fragment,l),a=!0)},o(l){d(t.$$.fragment,l),a=!1},d(l){l&&p(e),v(t)}}}function Ft(n){let e,r;return e=new Va({}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function qt(n){let e,r;return e=new mt({props:{title:"Starter Packs",$$slots:{header:[al]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p(t,a){const l={};a[1]&8&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function al(n){let e,r,t;return r=new vt({props:{boards:Ie.methods.asArray()}}),{c(){e=y("div"),h(r.$$.fragment),this.h()},l(a){e=L(a,"DIV",{slot:!0});var l=I(e);b(r.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"slot","header")},m(a,l){E(a,e,l),k(r,e,null),t=!0},p:H,i(a){t||(m(r.$$.fragment,a),t=!0)},o(a){d(r.$$.fragment,a),t=!1},d(a){a&&p(e),v(r)}}}function ll(n){let e,r,t,a,l;e=new $r({props:{pageTitle:n[6],$$slots:{footer:[rl],content:[tl],header:[Pa]},$$scope:{ctx:n}}});let o=n[11].boardSorter.show&&Ft(),i=n[7].showStartPacks&&qt(n);return{c(){h(e.$$.fragment),r=z(),o&&o.c(),t=z(),i&&i.c(),a=pe()},l(s){b(e.$$.fragment,s),r=O(s),o&&o.l(s),t=O(s),i&&i.l(s),a=pe()},m(s,c){k(e,s,c),E(s,r,c),o&&o.m(s,c),E(s,t,c),i&&i.m(s,c),E(s,a,c),l=!0},p(s,c){const f={};c[0]&64&&(f.pageTitle=s[6]),c[0]&1983|c[1]&8&&(f.$$scope={dirty:c,ctx:s}),e.$set(f),s[11].boardSorter.show?o?c[0]&2048&&m(o,1):(o=Ft(),o.c(),m(o,1),o.m(t.parentNode,t)):o&&(G(),d(o,1,1,()=>{o=null}),J()),s[7].showStartPacks?i?(i.p(s,c),c[0]&128&&m(i,1)):(i=qt(s),i.c(),m(i,1),i.m(a.parentNode,a)):i&&(G(),d(i,1,1,()=>{i=null}),J())},i(s){l||(m(e.$$.fragment,s),m(o),m(i),l=!0)},o(s){d(e.$$.fragment,s),d(o),d(i),l=!1},d(s){v(e,s),s&&p(r),o&&o.d(s),s&&p(t),i&&i.d(s),s&&p(a)}}}function nl(n,e,r){let t,a,l,o,i;fe(n,it,g=>r(29,t=g)),fe(n,ue,g=>r(10,a=g)),fe(n,he,g=>r(1,l=g)),fe(n,Ee,g=>r(2,o=g)),fe(n,se,g=>r(11,i=g));let s,c=null,f=[],u=0,_="(Loading)",T={selectedTracker:null,showStartPacks:!1,savingTrackers:[],addedTrackers:[],activeTip:0,hideTips:!1,view:localStorage.getItem("board-view")||"detail"},A={boards:!1,trackers:!1,ledger:!1,done:!1,checking:!1},w=[];const N=g=>{A.done==!1&&A.boards&&l.trackers&&A.ledger&&(r(8,A.done=!0,A),Z())};Ee.onReady(()=>{r(0,s=o),Te.hook("onBeforeSave",g=>{r(7,T.savingTrackers=g.getMeta().trackers.map(B=>B.id),T)}),Te.hook("onLogSaved",g=>{r(7,T.savingTrackers=[],T),r(7,T.addedTrackers=[],T)})});function C(g){localStorage.setItem("board-view",g),r(7,T.view=g,T)}function W(){a.activeBoard?Pe($t.routes.board(a.activeBoard.id)):Pe($t.routes.board("all"))}function Z(){if(a.active=="all"){r(6,_="All");let g=a.boards.find(P=>P.id=="all"),B=g?g.trackers:[];r(4,f=Object.keys(l.trackers).sort((P,ne)=>B.indexOf(P)>B.indexOf(ne)?1:B.indexOf(P)<B.indexOf(ne)?-1:P>ne?1:-1).map(P=>l.trackers[P]).filter(P=>P&&!P.hidden))}else r(6,_=(a.activeBoard||{}).label||""),r(4,f=((a.activeBoard||{}).trackers||[]).map(g=>l.trackers[g]).filter(g=>g))}function Y(g){return ee(this,null,function*(){g=g||a.activeBoard;let B=[{title:`${R.t("general.add-a-tracker","Add a Tracker")}`,icon:"addOutline",click(){return ee(this,null,function*(){yield Ue(300),U.addButtonTap()})}},{title:`${R.t("board.manage-this-tab","Manage this Tab")}`,icon:"edit",click(){return ee(this,null,function*(){W()})},divider:!0},{title:`${R.t("board.create-new-board","Add New Tab")}`,icon:"addFolder",divider:!0,click(){return ee(this,null,function*(){U.newBoard()})}}];a.boards.length&&B.push({title:`${R.t("board.organize-tabs","Organize Tabs")}`,icon:"switch",divider:!0,click(){return ee(this,null,function*(){se.toggleBoardSorter()})}}),B.push({title:`${R.t("general.all-nomie-settings","More Nomie Settings")}`,icon:"settings",divider:!0,click(){return ee(this,null,function*(){Pe("/settings")})}}),se.popmenu({title:`${g&&g.label?g.label:"All Trackers"}`,description:`${R.t("board.board-options","Tab Options")}`,buttons:B})})}const U={toggleSearch(){return ee(this,null,function*(){gr.view("trackers")})},addButtonTap(){let g=[];g.push({title:`${R.t("board.create-custom-tracker","Create a Tracker")}`,icon:"addOutline",click(){U.trackerEditor()}}),a.active!="all"&&g.push({title:`${R.t("board.add-existing-tracker","Pick from My Trackers")}`,icon:"chip",click:()=>ee(this,null,function*(){let B=yield se.selectTrackers();ue.addTrackersToActiveBoard(B),setTimeout(()=>{r(7,T)},20)})}),g.push({title:`${R.t("board.browse-starter-trackers","Browse Library")}`,icon:"library",click(){_r.toggle()}}),g.push({title:`${R.t("general.import-from-file","Import from File")}`,icon:"upload",click(){he.importFromFile()}}),se.popmenu({buttons:g})},injectAllBoard(g){g=g||[];let B=a.boards.find(ne=>ne.id=="all")||{id:"all",label:"All",trackers:Object.keys(l.trackers||{})},P=g.filter(ne=>ne.id!=="all");return P.unshift(B),P},trackerEditor(){return ee(this,null,function*(){try{console.log("Going to Edit this!");const g=yield hr().catch(B=>{throw B});ue.addTracker(g)}catch(g){alert(g.message)}})},getLastUsed(g){if(t[g.tag])return ct.fromNow(t[g.tag].date)},newBoard(){return ee(this,null,function*(){let g=yield se.prompt(`${R.t("board.add-a-board")}`,`${R.t("board.add-a-board-description","Tabs help you organize your trackers. For example: social, food, and fitness can contain trackers specifically for those activies. You can have the same tracker on multiple tabs.")}`,{placeholder:`${R.t("board.board-input-placeholder","Tab name or Emoji \u{1F44D}")}`});if(g){let B=g.trim();B.toLowerCase()!=="all"?ue.addBoard(B).then(P=>{ue.setActive(P.id)}):se.error("Sorry, 'All' is a reserved word")}})},trackerTapped(g){return ee(this,null,function*(){return se.trackerTap(g,l.trackers)})},showTrackerOptions(g){g=new br(g);const B={title:`${R.t("general.remove"),"Remove"}...`,icon:"delete",click(){return ee(this,null,function*(){a.active==="all"?(yield se.confirm(`${g.label} - ${R.t("general.delete-from-nomie","Delete from Nomie?")}`,`${R.t("tracker.delete-description","No tracked data will be deleted. You can always recreate this tracker")}`))&&(yield he.deleteTracker(g).then(Se=>{})):(yield se.confirm(`Remove ${g.label} from this board?`,"You can always re-add it later"))&&(yield ue.removeTrackerFromBoard(g,a.active))})}};let P;if(t.hasOwnProperty(g.tag)){let ne=t[g.tag];ne.log&&(P=`${R.t("board.last-used","Last used")} ${me(ne.date).fromNow()}`)}he.trackerOptions(g,{title:`${g.emoji||"\u26AA\uFE0F"} ${g.label||g.tag}`,description:P,buttons:[B]})}};let x,M,j,ae;xe(()=>{dr.scrollToTop(),ae=he.subscribe(g=>{r(4,f),Z()}),x=ue.subscribe(g=>{r(8,A.boards=!0,A),N(),A.done&&Z(),g.boards.map(B=>B.id).indexOf(g.active)==-1&&g.active!=="all"&&setTimeout(()=>{ue.setActive("all")},20)}),M=Te.subscribe(g=>{g.saving||(r(8,A.ledger=!0,A),N(),setTimeout(()=>{r(3,c),r(4,f)},20))}),j=Q.subscribe(g=>{r(7,T.addedTrackers=new pr(g).getMeta().trackers.map(B=>B.id),T)}),Te.getToday()}),Kt(()=>{x(),M(),j(),ae()});const q=g=>{U.trackerTapped(g.detail)},K=g=>{U.showTrackerOptions(g.detail)},oe=g=>{U.trackerTapped(g.detail)},$=g=>{U.showTrackerOptions(g.detail)},V=()=>{C("button")},F=()=>{C("list")},X=()=>{C("detail")},le=g=>{Y(g.detail)},ye=g=>{ue.setActive(g.detail.id)},be=()=>Y();return n.$$.update=()=>{n.$$.dirty[0]&2&&l&&r(9,w=Object.keys(l.trackers).map(g=>l.trackers[g]).filter(g=>g.started)),n.$$.dirty[0]&5&&o.meta&&r(5,u=me().diff(me(new Date(s.meta.lastBackup||null)),"day"))},[s,l,o,c,f,u,_,T,A,w,a,i,C,Y,U,q,K,oe,$,V,F,X,le,ye,be]}class sl extends ke{constructor(e){super();ve(this,e,nl,ll,we,{},null,[-1,-1])}}function ol(n){let e,r;return e=new sl({}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){k(e,t,a),r=!0},p:H,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function il(n,e,r){return[void 0,""]}class hl extends ke{constructor(e){super();ve(this,e,il,ol,we,{location:0,style:1})}get location(){return this.$$.ctx[0]}get style(){return this.$$.ctx[1]}}export{hl as default};
