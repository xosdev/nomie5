var P=(i,e,r)=>new Promise((t,l)=>{var s=n=>{try{a(r.next(n))}catch(c){l(c)}},o=n=>{try{a(r.throw(n))}catch(c){l(c)}},a=n=>n.done?t(n.value):Promise.resolve(n.value).then(s,o);a((r=r.apply(i,e)).next())});import{S as oe,y as ae,z as se,a4 as ue,B as E,F as j,H as O,I as p,J as T,O as Y,_ as _e,$ as me,a0 as $e,T as f,Y as _,a1 as S,X as B,Z as C,a2 as G,a9 as k,aa as y,ab as w,ad as v,ag as X,bu as J,ae as Ue,bB as qe,cm as Pe,bw as W,A as I,bx as x,C as V,by as ee,d as q,bz as Fe,bO as Re,P as A,Q as Ge,aT as Je}from"./vendor.36439469.js";import{a as ge,y as Qe,a7 as pe,a8 as Xe,a9 as Ke,aa as Ze,ab as We,ac as xe,I as H,R as te,M as et,X as F,a3 as le,d as R,g as ie,q as ce,J as tt,L as lt,U as rt,w as Q,ad as nt,t as re,N as ot,H as at,ae as st,u as it,_ as ct,T as de,p as ft,Q as ut,K as he,h as fe,af as be}from"./index.35142b07.js";import{O as _t}from"./offline-queue.9c4da2fd.js";import{S as mt}from"./shortcut-user-button.b5fbf8bb.js";import"./shortcut-button.7fcdb474.js";function $t(i){let e,r,t,l;const s=i[8].default,o=ue(s,i,i[7],null);return{c(){e=E("div"),o&&o.c(),this.h()},l(a){e=j(a,"DIV",{class:!0,style:!0});var n=O(e);o&&o.l(n),n.forEach(p),this.h()},h(){T(e,"class",r="nc-grid "+i[0]+" svelte-15ryzxy"),T(e,"style",t="--columnFr: "+i[2]+"; --columnDots: "+i[3]+"; --gap: "+i[4]+"; "+i[1])},m(a,n){Y(a,e,n),o&&o.m(e,null),l=!0},p(a,[n]){o&&o.p&&(!l||n&128)&&_e(o,s,a,a[7],l?$e(s,a[7],n,null):me(a[7]),null),(!l||n&1&&r!==(r="nc-grid "+a[0]+" svelte-15ryzxy"))&&T(e,"class",r),(!l||n&30&&t!==(t="--columnFr: "+a[2]+"; --columnDots: "+a[3]+"; --gap: "+a[4]+"; "+a[1]))&&T(e,"style",t)},i(a){l||(f(o,a),l=!0)},o(a){_(o,a),l=!1},d(a){a&&p(e),o&&o.d(a)}}}function gt(i,e,r){let{$$slots:t={},$$scope:l}=e,{columns:s=3}=e,{gap:o=2}=e,{className:a=""}=e,{style:n=""}=e,c="1fr 1fr 1fr",g=". . .",d="2px 2px";return i.$$set=D=>{"columns"in D&&r(5,s=D.columns),"gap"in D&&r(6,o=D.gap),"className"in D&&r(0,a=D.className),"style"in D&&r(1,n=D.style),"$$scope"in D&&r(7,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&96&&s&&(r(2,c=Array(s).fill("1fr").join(" ")),r(3,g=Array(s).fill(".").join(" ")),r(4,d=`${o}px`))},[a,n,c,g,d,s,o,l,t]}class pt extends oe{constructor(e){super();ae(this,e,gt,$t,se,{columns:5,gap:6,className:0,style:1})}}const{Map:dt}=Pe;function ke(i,e,r){const t=i.slice();return t[6]=e[r],t}function ye(i,e,r){const t=i.slice();return t[26]=e[r],t}function we(i,e,r){const t=i.slice();return t[21]=e[r],t}function ve(i,e,r){const t=i.slice();return t[21]=e[r],t}const ht=i=>({}),De=i=>({});function Ye(i,e,r){const t=i.slice();return t[18]=e[r],t}function bt(i){let e,r,t;return r=new et({props:{records:i[1],style:"height:100%;"}}),{c(){e=E("div"),k(r.$$.fragment),this.h()},l(l){e=j(l,"DIV",{class:!0});var s=O(e);y(r.$$.fragment,s),s.forEach(p),this.h()},h(){T(e,"class","flex flex-shrink-0 w-full h-full")},m(l,s){Y(l,e,s),w(r,e,null),t=!0},p(l,s){const o={};s&2&&(o.records=l[1]),r.$set(o)},i(l){t||(f(r.$$.fragment,l),t=!0)},o(l){_(r.$$.fragment,l),t=!1},d(l){l&&p(e),v(r)}}}function kt(i){let e,r,t,l;const s=[Nt,Yt],o=[];function a(n,c){return n[6].length?1:0}return e=a(i),r=o[e]=s[e](i),{c(){r.c(),t=S()},l(n){r.l(n),t=S()},m(n,c){o[e].m(n,c),Y(n,t,c),l=!0},p(n,c){let g=e;e=a(n),e===g?o[e].p(n,c):(B(),_(o[g],1,1,()=>{o[g]=null}),C(),r=o[e],r?r.p(n,c):(r=o[e]=s[e](n),r.c()),f(r,1),r.m(t.parentNode,t))},i(n){l||(f(r),l=!0)},o(n){_(r),l=!1},d(n){o[e].d(n),n&&p(t)}}}function yt(i){let e,r,t,l;const s=[Lt,St],o=[];function a(n,c){return n[4].length?1:0}return e=a(i),r=o[e]=s[e](i),{c(){r.c(),t=S()},l(n){r.l(n),t=S()},m(n,c){o[e].m(n,c),Y(n,t,c),l=!0},p(n,c){let g=e;e=a(n),e===g?o[e].p(n,c):(B(),_(o[g],1,1,()=>{o[g]=null}),C(),r=o[e],r?r.p(n,c):(r=o[e]=s[e](n),r.c()),f(r,1),r.m(t.parentNode,t))},i(n){l||(f(r),l=!0)},o(n){_(r),l=!1},d(n){o[e].d(n),n&&p(t)}}}function wt(i){let e,r,t,l;const s=[Ot,jt],o=[];function a(n,c){return n[3].length?1:0}return e=a(i),r=o[e]=s[e](i),{c(){r.c(),t=S()},l(n){r.l(n),t=S()},m(n,c){o[e].m(n,c),Y(n,t,c),l=!0},p(n,c){let g=e;e=a(n),e===g?o[e].p(n,c):(B(),_(o[g],1,1,()=>{o[g]=null}),C(),r=o[e],r?r.p(n,c):(r=o[e]=s[e](n),r.c()),f(r,1),r.m(t.parentNode,t))},i(n){l||(f(r),l=!0)},o(n){_(r),l=!1},d(n){o[e].d(n),n&&p(t)}}}function vt(i){let e,r,t,l;const s=[It,Ct],o=[];function a(n,c){return n[1].length?1:0}return e=a(i),r=o[e]=s[e](i),{c(){r.c(),t=S()},l(n){r.l(n),t=S()},m(n,c){o[e].m(n,c),Y(n,t,c),l=!0},p(n,c){let g=e;e=a(n),e===g?o[e].p(n,c):(B(),_(o[g],1,1,()=>{o[g]=null}),C(),r=o[e],r?r.p(n,c):(r=o[e]=s[e](n),r.c()),f(r,1),r.m(t.parentNode,t))},i(n){l||(f(r),l=!0)},o(n){_(r),l=!1},d(n){o[e].d(n),n&&p(t)}}}function Dt(i){let e,r;return e=new F({props:{className:"p-3",$$slots:{default:[Ht]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&131108&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Yt(i){let e,r;return e=new F({props:{$$slots:{default:[Tt]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&131136&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Nt(i){let e,r;return e=new le({props:{title:R.t("on-this-day.no-context","No Context on this Day"),emoji:"\u{1F937}\u200D\u2642\uFE0F"}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:X,i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Mt(i){let e=i[6]+"",r,t;return{c(){r=W(e),t=I()},l(l){r=x(l,e),t=V(l)},m(l,s){Y(l,r,s),Y(l,t,s)},p(l,s){s&64&&e!==(e=l[6]+"")&&ee(r,e)},d(l){l&&p(r),l&&p(t)}}}function Ne(i){let e,r;function t(){return i[16](i[6])}return e=new ie({props:{shape:"round",size:"lg",color:"light",className:"m-2",$$slots:{default:[Mt]},$$scope:{ctx:i}}}),e.$on("click",t),{c(){k(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){w(e,l,s),r=!0},p(l,s){i=l;const o={};s&131136&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(l){r||(f(e.$$.fragment,l),r=!0)},o(l){_(e.$$.fragment,l),r=!1},d(l){v(e,l)}}}function Tt(i){let e,r,t=i[6],l=[];for(let o=0;o<t.length;o+=1)l[o]=Ne(ke(i,t,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){e=E("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=j(o,"DIV",{class:!0});var a=O(e);for(let n=0;n<l.length;n+=1)l[n].l(a);a.forEach(p),this.h()},h(){T(e,"class","mt-3 n-grid")},m(o,a){Y(o,e,a);for(let n=0;n<l.length;n+=1)l[n].m(e,null);r=!0},p(o,a){if(a&64){t=o[6];let n;for(n=0;n<t.length;n+=1){const c=ke(o,t,n);l[n]?(l[n].p(c,a),f(l[n],1)):(l[n]=Ne(c),l[n].c(),f(l[n],1),l[n].m(e,null))}for(B(),n=t.length;n<l.length;n+=1)s(n);C()}},i(o){if(!r){for(let a=0;a<t.length;a+=1)f(l[a]);r=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)_(l[a]);r=!1},d(o){o&&p(e),J(l,o)}}}function St(i){let e,r;return e=new F({props:{$$slots:{default:[Et]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&131088&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Lt(i){let e,r;return e=new le({props:{title:R.t("on-this-day.no-people","No People on this Day"),emoji:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}"}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:X,i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Me(i){let e,r;function t(){return i[14](i[26])}function l(){return i[15](i[26])}return e=new mt({props:{person:i[26]}}),e.$on("click",t),e.$on("more",l),{c(){k(e.$$.fragment)},l(s){y(e.$$.fragment,s)},m(s,o){w(e,s,o),r=!0},p(s,o){i=s;const a={};o&16&&(a.person=i[26]),e.$set(a)},i(s){r||(f(e.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),r=!1},d(s){v(e,s)}}}function Et(i){let e,r,t=i[4],l=[];for(let o=0;o<t.length;o+=1)l[o]=Me(ye(i,t,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){e=E("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=j(o,"DIV",{class:!0});var a=O(e);for(let n=0;n<l.length;n+=1)l[n].l(a);a.forEach(p),this.h()},h(){T(e,"class","grid grid-cols-2 gap-4 p-4 md:grid-cols-3 lg:grid-cols-4")},m(o,a){Y(o,e,a);for(let n=0;n<l.length;n+=1)l[n].m(e,null);r=!0},p(o,a){if(a&16){t=o[4];let n;for(n=0;n<t.length;n+=1){const c=ye(o,t,n);l[n]?(l[n].p(c,a),f(l[n],1)):(l[n]=Me(c),l[n].c(),f(l[n],1),l[n].m(e,null))}for(B(),n=t.length;n<l.length;n+=1)s(n);C()}},i(o){if(!r){for(let a=0;a<t.length;a+=1)f(l[a]);r=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)_(l[a]);r=!1},d(o){o&&p(e),J(l,o)}}}function jt(i){let e,r;return e=new F({props:{className:"p-2 py-4 space-y-4",$$slots:{default:[Bt]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&131080&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ot(i){let e,r;return e=new le({props:{title:R.t("on-this-day.no-notes","No Notes on this Day"),emoji:"\u270D\u{1F3FD}"}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:X,i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Te(i){let e,r;return e=new ce({props:{log:i[21]}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&8&&(s.log=t[21]),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Bt(i){let e,r,t=i[3],l=[];for(let o=0;o<t.length;o+=1)l[o]=Te(we(i,t,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=S()},l(o){for(let a=0;a<l.length;a+=1)l[a].l(o);e=S()},m(o,a){for(let n=0;n<l.length;n+=1)l[n].m(o,a);Y(o,e,a),r=!0},p(o,a){if(a&8){t=o[3];let n;for(n=0;n<t.length;n+=1){const c=we(o,t,n);l[n]?(l[n].p(c,a),f(l[n],1)):(l[n]=Te(c),l[n].c(),f(l[n],1),l[n].m(e.parentNode,e))}for(B(),n=t.length;n<l.length;n+=1)s(n);C()}},i(o){if(!r){for(let a=0;a<t.length;a+=1)f(l[a]);r=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)_(l[a]);r=!1},d(o){J(l,o),o&&p(e)}}}function Ct(i){let e,r;return e=new F({props:{className:"p-2 py-4 space-y-4",$$slots:{default:[Vt]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&131074&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function It(i){let e;const r=i[11].empty,t=ue(r,i,i[17],De);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,s){t&&t.m(l,s),e=!0},p(l,s){t&&t.p&&(!e||s&131072)&&_e(t,r,l,l[17],e?$e(r,l[17],s,ht):me(l[17]),De)},i(l){e||(f(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Se(i){let e,r;return e=new ce({props:{log:i[21]}}),e.$on("textClick",i[13]),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&2&&(s.log=t[21]),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Vt(i){let e,r,t=i[1],l=[];for(let o=0;o<t.length;o+=1)l[o]=Se(ve(i,t,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=S()},l(o){for(let a=0;a<l.length;a+=1)l[a].l(o);e=S()},m(o,a){for(let n=0;n<l.length;n+=1)l[n].m(o,a);Y(o,e,a),r=!0},p(o,a){if(a&2){t=o[1];let n;for(n=0;n<t.length;n+=1){const c=ve(o,t,n);l[n]?(l[n].p(c,a),f(l[n],1)):(l[n]=Se(c),l[n].c(),f(l[n],1),l[n].m(e.parentNode,e))}for(B(),n=t.length;n<l.length;n+=1)s(n);C()}},i(o){if(!r){for(let a=0;a<t.length;a+=1)f(l[a]);r=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)_(l[a]);r=!1},d(o){J(l,o),o&&p(e)}}}function Le(i,e){let r,t,l;function s(){return e[12](e[18])}return t=new tt({props:{solo:!0,className:"m-1",element:{id:e[18].tag,value:e[18].value,type:"tracker",obj:e[18].tracker}}}),t.$on("click",s),{key:i,first:null,c(){r=S(),k(t.$$.fragment),this.h()},l(o){r=S(),y(t.$$.fragment,o),this.h()},h(){this.first=r},m(o,a){Y(o,r,a),w(t,o,a),l=!0},p(o,a){e=o;const n={};a&4&&(n.element={id:e[18].tag,value:e[18].value,type:"tracker",obj:e[18].tracker}),t.$set(n)},i(o){l||(f(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&p(r),v(t,o)}}}function At(i){let e=[],r=new dt,t,l,s=i[2];const o=a=>a[18].tag;for(let a=0;a<s.length;a+=1){let n=Ye(i,s,a),c=o(n);r.set(c,e[a]=Le(c,n))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=S()},l(a){for(let n=0;n<e.length;n+=1)e[n].l(a);t=S()},m(a,n){for(let c=0;c<e.length;c+=1)e[c].m(a,n);Y(a,t,n),l=!0},p(a,n){n&4&&(s=a[2],B(),e=Ue(e,n,o,1,a,s,r,t.parentNode,qe,Le,t,Ye),C())},i(a){if(!l){for(let n=0;n<s.length;n+=1)f(e[n]);l=!0}},o(a){for(let n=0;n<e.length;n+=1)_(e[n]);l=!1},d(a){for(let n=0;n<e.length;n+=1)e[n].d(a);a&&p(t)}}}function Ht(i){let e,r;return e=new pt({props:{gap:0,columns:i[5],$$slots:{default:[At]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&32&&(s.columns=t[5]),l&131076&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function zt(i){let e,r,t,l;const s=[Dt,vt,wt,yt,kt,bt],o=[];function a(n,c){return n[0]==="trackers"?0:n[0]==="all"?1:n[0]==="notes"?2:n[0]==="people"?3:n[0]==="context"?4:n[0]==="locations"?5:-1}return~(e=a(i))&&(r=o[e]=s[e](i)),{c(){r&&r.c(),t=S()},l(n){r&&r.l(n),t=S()},m(n,c){~e&&o[e].m(n,c),Y(n,t,c),l=!0},p(n,[c]){let g=e;e=a(n),e===g?~e&&o[e].p(n,c):(r&&(B(),_(o[g],1,1,()=>{o[g]=null}),C()),~e?(r=o[e],r?r.p(n,c):(r=o[e]=s[e](n),r.c()),f(r,1),r.m(t.parentNode,t)):r=null)},i(n){l||(f(r),l=!0)},o(n){_(r),l=!1},d(n){~e&&o[e].d(n),n&&p(t)}}}function Ut(i,e,r){let t,l,s;G(i,ge,b=>r(8,t=b)),G(i,Qe,b=>r(9,l=b)),G(i,pe,b=>r(10,s=b));let{$$slots:o={},$$scope:a}=e,{view:n="notes"}=e,{logs:c=[]}=e,g=[],d=[],D=[],$=[],u,m=3;const N=b=>{H.elementOptions(new te({id:b.tag,value:b.value,type:"tracker",obj:b.tracker}))},M=b=>{b.detail.type=="tracker"&&!b.detail.obj&&(b.detail.obj=ge.getByTag(b.detail.id)),H.elementOptions(b.detail)},z=b=>{H.elementOptions(new te({id:b.username,raw:`@${b.username}`,type:"person"}))},K=b=>{H.elementOptions(new te({id:b.username,raw:`@${b.username}`,type:"person"}))},Z=b=>{H.elementOptions(new te({id:b,raw:b,type:"context"}))};return i.$$set=b=>{"view"in b&&r(0,n=b.view),"logs"in b&&r(1,c=b.logs),"$$scope"in b&&r(17,a=b.$$scope)},i.$$.update=()=>{if(i.$$.dirty&1024&&(s.width<400?r(5,m=2):(s.width<700||s.width>900)&&r(5,m=3)),i.$$.dirty&898&&c&&c.length&&u!==c.map(b=>b._id).join(",")){r(7,u=c.map(ne=>ne._id).join(","));let b=Xe(c);r(3,d=Ke(c)),r(4,D=Ze(c,l.people)),r(6,$=We(c)),r(2,g=xe(b,t.trackers))}},[n,c,g,d,D,m,$,u,t,l,s,o,N,M,z,K,Z,a]}class qt extends oe{constructor(e){super();ae(this,e,Ut,zt,se,{view:0,logs:1})}}function Ee(i,e,r){const t=i.slice();return t[26]=e[r],t}function je(i,e,r){const t=i.slice();return t[23]=e[r],t}function Pt(i){let e,r;return e=new fe({props:{className:"text-primary-500",name:"search",size:24}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p:X,i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Oe(i){let e,r;return e=new he({props:{size:16}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ft(i){let e,r,t,l,s=i[1].date.format("ddd")+"",o,a,n=i[1].date.format(i[8].meta.is24Hour?"D MMM YYYY":"MMM D YYYY")+"",c,g,d,D;e=new ie({props:{icon:!0,$$slots:{default:[Pt]},$$scope:{ctx:i}}}),e.$on("click",i[11].search);let $=i[3]&&Oe();return d=new ft({props:{isToday:i[6]}}),d.$on("previous",i[11].previous),d.$on("next",i[11].next),d.$on("calendar",i[11].selectDate),{c(){k(e.$$.fragment),r=I(),$&&$.c(),t=I(),l=E("h1"),o=W(s),a=I(),c=W(n),g=I(),k(d.$$.fragment),this.h()},l(u){y(e.$$.fragment,u),r=V(u),$&&$.l(u),t=V(u),l=j(u,"H1",{class:!0,"aria-label":!0});var m=O(l);o=x(m,s),a=V(m),c=x(m,n),m.forEach(p),g=V(u),y(d.$$.fragment,u),this.h()},h(){T(l,"class","leading-none ntitle line-clamp-1"),T(l,"aria-label","Current Active Date")},m(u,m){w(e,u,m),Y(u,r,m),$&&$.m(u,m),Y(u,t,m),Y(u,l,m),A(l,o),A(l,a),A(l,c),Y(u,g,m),w(d,u,m),D=!0},p(u,m){const N={};m&536870912&&(N.$$scope={dirty:m,ctx:u}),e.$set(N),u[3]?$?m&8&&f($,1):($=Oe(),$.c(),f($,1),$.m(t.parentNode,t)):$&&(B(),_($,1,1,()=>{$=null}),C()),(!D||m&2)&&s!==(s=u[1].date.format("ddd")+"")&&ee(o,s),(!D||m&258)&&n!==(n=u[1].date.format(u[8].meta.is24Hour?"D MMM YYYY":"MMM D YYYY")+"")&&ee(c,n);const M={};m&64&&(M.isToday=u[6]),d.$set(M)},i(u){D||(f(e.$$.fragment,u),f($),f(d.$$.fragment,u),D=!0)},o(u){_(e.$$.fragment,u),_($),_(d.$$.fragment,u),D=!1},d(u){v(e,u),u&&p(r),$&&$.d(u),u&&p(t),u&&p(l),u&&p(g),v(d,u)}}}function Be(i){let e,r;return e=new de({props:{$$slots:{default:[Jt]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&536871056&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Rt(i){let e,r,t,l,s,o,a;return r=new fe({props:{name:i[26].icon,size:28}}),{c(){e=E("div"),k(r.$$.fragment),t=I(),l=E("div"),o=I(),this.h()},l(n){e=j(n,"DIV",{class:!0});var c=O(e);y(r.$$.fragment,c),t=V(c),l=j(c,"DIV",{"data-count":!0,class:!0}),O(l).forEach(p),c.forEach(p),o=V(n),this.h()},h(){T(l,"data-count",s=i[26].reduce(i[4])),T(l,"class","notification-badge"),T(e,"class","relative pt-1")},m(n,c){Y(n,e,c),w(r,e,null),A(e,t),A(e,l),Y(n,o,c),a=!0},p(n,c){(!a||c&16&&s!==(s=n[26].reduce(n[4])))&&T(l,"data-count",s)},i(n){a||(f(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&p(e),v(r),n&&p(o)}}}function Ce(i){let e,r;function t(){return i[16](i[26])}return e=new ie({props:{className:i[7]===i[26].view?"active":"",icon:!0,$$slots:{default:[Rt]},$$scope:{ctx:i}}}),e.$on("click",t),{c(){k(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,s){w(e,l,s),r=!0},p(l,s){i=l;const o={};s&128&&(o.className=i[7]===i[26].view?"active":""),s&536870928&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(l){r||(f(e.$$.fragment,l),r=!0)},o(l){_(e.$$.fragment,l),r=!1},d(l){v(e,l)}}}function Gt(i){let e,r,t=be,l=[];for(let o=0;o<t.length;o+=1)l[o]=Ce(Ee(i,t,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=S()},l(o){for(let a=0;a<l.length;a+=1)l[a].l(o);e=S()},m(o,a){for(let n=0;n<l.length;n+=1)l[n].m(o,a);Y(o,e,a),r=!0},p(o,a){if(a&144){t=be;let n;for(n=0;n<t.length;n+=1){const c=Ee(o,t,n);l[n]?(l[n].p(c,a),f(l[n],1)):(l[n]=Ce(c),l[n].c(),f(l[n],1),l[n].m(e.parentNode,e))}for(B(),n=t.length;n<l.length;n+=1)s(n);C()}},i(o){if(!r){for(let a=0;a<t.length;a+=1)f(l[a]);r=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)_(l[a]);r=!1},d(o){J(l,o),o&&p(e)}}}function Jt(i){let e,r;return e=new ut({props:{$$slots:{default:[Gt]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&536871056&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Qt(i){let e,r,t,l;e=new de({props:{className:" px-2 items-center",$$slots:{default:[Ft]},$$scope:{ctx:i}}});let s=i[4].length&&Be(i);return{c(){k(e.$$.fragment),r=I(),s&&s.c(),t=S()},l(o){y(e.$$.fragment,o),r=V(o),s&&s.l(o),t=S()},m(o,a){w(e,o,a),Y(o,r,a),s&&s.m(o,a),Y(o,t,a),l=!0},p(o,a){const n={};a&536871242&&(n.$$scope={dirty:a,ctx:o}),e.$set(n),o[4].length?s?(s.p(o,a),a&16&&f(s,1)):(s=Be(o),s.c(),f(s,1),s.m(t.parentNode,t)):s&&(B(),_(s,1,1,()=>{s=null}),C())},i(o){l||(f(e.$$.fragment,o),f(s),l=!0)},o(o){_(e.$$.fragment,o),_(s),l=!1},d(o){v(e,o),o&&p(r),s&&s.d(o),o&&p(t)}}}function Xt(i){let e,r,t;return r=new F({props:{$$slots:{default:[Qt]},$$scope:{ctx:i}}}),{c(){e=E("header"),k(r.$$.fragment),this.h()},l(l){e=j(l,"HEADER",{slot:!0,class:!0});var s=O(e);y(r.$$.fragment,s),s.forEach(p),this.h()},h(){T(e,"slot","header"),T(e,"class","items-center flex-column")},m(l,s){Y(l,e,s),w(r,e,null),t=!0},p(l,s){const o={};s&536871386&&(o.$$scope={dirty:s,ctx:l}),r.$set(o)},i(l){t||(f(r.$$.fragment,l),t=!0)},o(l){_(r.$$.fragment,l),t=!1},d(l){l&&p(e),v(r)}}}function Kt(i){let e,r;return e=new qt({props:{view:i[7],logs:i[4]}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&128&&(s.view=t[7]),l&16&&(s.logs=t[4]),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Zt(i){let e,r;return e=new F({props:{className:"flex items-center justify-center max-h-full h-75vh",$$slots:{default:[xt]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&536871170&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Wt(i){let e,r,t;return r=new he({}),{c(){e=E("div"),k(r.$$.fragment),this.h()},l(l){e=j(l,"DIV",{class:!0});var s=O(e);y(r.$$.fragment,s),s.forEach(p),this.h()},h(){T(e,"class","flex items-center justify-center w-full max-h-full h-75vh")},m(l,s){Y(l,e,s),w(r,e,null),t=!0},p:X,i(l){t||(f(r.$$.fragment,l),t=!0)},o(l){_(r.$$.fragment,l),t=!1},d(l){l&&p(e),v(r)}}}function xt(i){let e,r;return e=new le({props:{emoji:"\u23F3",title:i[1].date.format(i[8].meta.is24Hour?"ddd Do MMM YYYY":"ddd MMM Do YYYY"),description:`${R.t("history.empty-day","No data was found on this day")}`,buttonLabel:R.t("history.add-a-note","Add a Note..."),buttonClick:i[10]}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,l){const s={};l&258&&(s.title=t[1].date.format(t[8].meta.is24Hour?"ddd Do MMM YYYY":"ddd MMM Do YYYY")),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ie(i){let e,r,t;return r=new F({props:{className:"px-4 pb-4",$$slots:{default:[el]},$$scope:{ctx:i}}}),{c(){e=E("section"),k(r.$$.fragment),this.h()},l(l){e=j(l,"SECTION",{class:!0});var s=O(e);y(r.$$.fragment,s),s.forEach(p),this.h()},h(){T(e,"class","mt-3 bg-primary-500")},m(l,s){Y(l,e,s),w(r,e,null),t=!0},p(l,s){const o={};s&536871424&&(o.$$scope={dirty:s,ctx:l}),r.$set(o)},i(l){t||(f(r.$$.fragment,l),t=!0)},o(l){_(r.$$.fragment,l),t=!1},d(l){l&&p(e),v(r)}}}function Ve(i){let e,r,t,l=q(i[23].end).fromNow()+"",s,o,a,n,c,g,d,D,$;a=new fe({props:{icon:Je,className:"fill-white",size:16}});function u(){return i[14](i[23])}return g=new ce({props:{fullDate:!0,className:"aged",log:i[23]}}),g.$on("textClick",i[15]),{c(){e=E("div"),r=E("button"),t=E("span"),s=W(l),o=I(),k(a.$$.fragment),c=I(),k(g.$$.fragment),this.h()},l(m){e=j(m,"DIV",{class:!0});var N=O(e);r=j(N,"BUTTON",{"aria-label":!0,class:!0});var M=O(r);t=j(M,"SPAN",{class:!0});var z=O(t);s=x(z,l),z.forEach(p),o=V(M),y(a.$$.fragment,M),M.forEach(p),N.forEach(p),c=V(m),y(g.$$.fragment,m),this.h()},h(){T(t,"class","text-sm"),T(r,"aria-label",n="View logs from "+q(i[23].end).format("ddd MM YYYY")),T(r,"class","flex items-center justify-center w-full py-2 font-medium text-black bg-primary-500"),T(e,"class","py-3 text-center memories-log-header")},m(m,N){Y(m,e,N),A(e,r),A(r,t),A(t,s),A(r,o),w(a,r,null),Y(m,c,N),w(g,m,N),d=!0,D||($=Ge(r,"click",u),D=!0)},p(m,N){i=m,(!d||N&512)&&l!==(l=q(i[23].end).fromNow()+"")&&ee(s,l),(!d||N&512&&n!==(n="View logs from "+q(i[23].end).format("ddd MM YYYY")))&&T(r,"aria-label",n);const M={};N&512&&(M.log=i[23]),g.$set(M)},i(m){d||(f(a.$$.fragment,m),f(g.$$.fragment,m),d=!0)},o(m){_(a.$$.fragment,m),_(g.$$.fragment,m),d=!1},d(m){m&&p(e),v(a),m&&p(c),v(g,m),D=!1,$()}}}function el(i){let e,r,t=i[9].memories,l=[];for(let o=0;o<t.length;o+=1)l[o]=Ve(je(i,t,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){e=E("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=j(o,"DIV",{class:!0});var a=O(e);for(let n=0;n<l.length;n+=1)l[n].l(a);a.forEach(p),this.h()},h(){T(e,"class","memories")},m(o,a){Y(o,e,a);for(let n=0;n<l.length;n+=1)l[n].m(e,null);r=!0},p(o,a){if(a&2560){t=o[9].memories;let n;for(n=0;n<t.length;n+=1){const c=je(o,t,n);l[n]?(l[n].p(c,a),f(l[n],1)):(l[n]=Ve(c),l[n].c(),f(l[n],1),l[n].m(e,null))}for(B(),n=t.length;n<l.length;n+=1)s(n);C()}},i(o){if(!r){for(let a=0;a<t.length;a+=1)f(l[a]);r=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)_(l[a]);r=!1},d(o){o&&p(e),J(l,o)}}}function tl(i){let e,r,t,l,s,o,a,n=i[9].memories.length>0&&!Ae&&i[6]&&["all","notes"].indexOf(i[7])>-1,c;t=new _t({});const g=[Wt,Zt,Kt],d=[];function D(u,m){return u[5]?0:!u[5]&&!u[4].length?1:2}s=D(i),o=d[s]=g[s](i);let $=n&&Ie(i);return{c(){e=E("main"),r=E("div"),k(t.$$.fragment),l=I(),o.c(),a=I(),$&&$.c(),this.h()},l(u){e=j(u,"MAIN",{slot:!0,class:!0});var m=O(e);r=j(m,"DIV",{class:!0});var N=O(r);y(t.$$.fragment,N),l=V(N),o.l(N),N.forEach(p),a=V(m),$&&$.l(m),m.forEach(p),this.h()},h(){T(r,"class","relative flex-grow min-h-full"),T(e,"slot","content"),T(e,"class","flex flex-col min-h-full page page-history")},m(u,m){Y(u,e,m),A(e,r),w(t,r,null),A(r,l),d[s].m(r,null),A(e,a),$&&$.m(e,null),c=!0},p(u,m){let N=s;s=D(u),s===N?d[s].p(u,m):(B(),_(d[N],1,1,()=>{d[N]=null}),C(),o=d[s],o?o.p(u,m):(o=d[s]=g[s](u),o.c()),f(o,1),o.m(r,null)),m&704&&(n=u[9].memories.length>0&&!Ae&&u[6]&&["all","notes"].indexOf(u[7])>-1),n?$?($.p(u,m),m&704&&f($,1)):($=Ie(u),$.c(),f($,1),$.m(e,null)):$&&(B(),_($,1,1,()=>{$=null}),C())},i(u){c||(f(t.$$.fragment,u),f(o),f($),c=!0)},o(u){_(t.$$.fragment,u),_(o),_($),c=!1},d(u){u&&p(e),v(t),d[s].d(),$&&$.d()}}}function ll(i){let e,r;return e=new lt({props:{pageTitle:i[2],style:i[0],$$slots:{content:[tl],header:[Xt]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,l){w(e,t,l),r=!0},p(t,[l]){const s={};l&4&&(s.pageTitle=t[2]),l&1&&(s.style=t[0]),l&536871930&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){r||(f(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}let Ae=!1;function rl(i,e,r){let t,l,s;G(i,pe,h=>r(21,t=h)),G(i,rt,h=>r(8,l=h)),G(i,Q,h=>r(9,s=h));const o=void 0;let{style:a=void 0}=e,n=null;const c={date:q(new Date),time_format:nt.book_time_format,logs:[],ledger:null,locations:[],showAllLocations:!1};let g=!1,d=[],D=!0,$=!0,u="all",m;function N(){let h={end:void 0};$||(h.end=c.date.hour(q().hour()).toDate().getTime());let L=new ot(h);at.journal(L)}const M={textClick(h){return P(this,null,function*(){let L=h.detail;H.elementOptions(L)})},getLogs(h){return P(this,null,function*(){h=h!==!1,r(5,D=!0);let L=!0;return st.getEngine().name=="Blockstack"&&t.offline==!0&&(L=!1),L&&r(4,d=yield Q.query({start:c.date.startOf("day"),end:c.date.endOf("day"),fresh:h})),r(4,d=d||[]),d.filter(U=>U.lat).map(U=>new it({lat:U.lat,lng:U.lng,name:U.location,log:U})),r(5,D=!1),d||[]})},previous(){M.getDate(c.date.subtract(1,"day"))},getDate(h){r(1,c.date=h,c),M.getLogs(),M.scrollTop()},next(){M.getDate(c.date.add(1,"day"))},scrollTop(){document.getElementById("nomie-main").scrollTo(0,0)},goto(h){r(1,c.date=h,c),M.getLogs(),M.scrollTop()},search(){ct.view("history")},trackerTapped(h,L){H.openStats(`#${h.tag}`)},personTapped(h,L){H.openStats(`@${h.id}`)},contextTapped(h,L){H.openStats(`+${h.id}`)},showLogOptions(h){H.logOptions(h)},selectDate(){let h=[{time:30,title:"1 Month Back",unit:"day"},{time:90,title:"90 Days Back",unit:"day"},{time:180,title:"6 Months Back",unit:"day"},{time:1,title:"1 Year Back",unit:"year"},{time:2,title:"2 Years Back",unit:"year"},{time:-1,divider:!0,title:`${R.t("general.select-date","Select Date")}...`,unit:"day"}];$||h.unshift({days:0,divider:!0,title:`${R.t("history.go-to-today","Go to Today")}`}),H.popmenu({buttons:h.map(L=>({title:L.title,divider:!!L.divider,click:()=>P(this,null,function*(){if(L.time==-1){let U=yield H.selectDate();U&&M.goto(q(U))}else L.time===void 0||L.time===0?M.goto(q(new Date)):M.goto(c.date.subtract(L.time||0,L.unit||"day"))})}))})}};function z(){return P(this,null,function*(){r(3,g=!0),yield re(500),yield M.getLogs(!0),yield Q.getMemories(),r(3,g=!1)})}let K,Z,b;Fe(()=>{window.scrollTo(0,0),document.body.classList.remove("scrolled"),z(),K=Q.hook("onLogUpdate",h=>P(this,null,function*(){yield re(600),z()})),Z=Q.hook("onLogSaved",h=>P(this,null,function*(){yield re(600),z()})),b=Q.hook("onLogsDeleted",()=>P(this,null,function*(){yield re(600),z()}))}),Re(()=>{Z(),K(),b()});const ne=h=>{M.goto(q(h.end))},He=h=>{M.textClick(h)},ze=h=>{r(7,u=h.view)};return i.$$set=h=>{"style"in h&&r(0,a=h.style)},i.$$.update=()=>{i.$$.dirty&8194&&c.date&&c.date!==m&&(r(13,m=c.date),r(6,$=new Date().toDateString()==c.date.toDate().toDateString())),i.$$.dirty&2&&r(2,n=`History ${c.date.format("YYYY-MM-DD")}`)},[a,c,n,g,d,D,$,u,l,s,N,M,o,m,ne,He,ze]}class fl extends oe{constructor(e){super();ae(this,e,rl,ll,se,{location:12,style:0})}get location(){return this.$$.ctx[12]}}export{fl as default};
