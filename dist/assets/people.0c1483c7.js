var B=(s,t,n)=>new Promise((e,r)=>{var o=p=>{try{f(n.next(p))}catch(c){r(c)}},$=p=>{try{f(n.throw(p))}catch(c){r(c)}},f=p=>p.done?e(p.value):Promise.resolve(p.value).then(o,$);f((n=n.apply(s,t)).next())});import{S as Z,y as G,z as K,a9 as b,aa as k,ab as v,T as _,Y as d,ad as w,a2 as Q,bz as R,B as z,F as j,H as I,I as m,J as N,O as g,a1 as D,A as C,C as E,X as V,Z as O,ae as U,bB as W,ag as P,bw as L,bx as S,by as x}from"./vendor.36439469.js";import{L as ee,y as F,X as M,I as A,d as T,w as te,am as ne,_ as re,T as oe,g as X,h as q,j as H,a3 as le}from"./index.35142b07.js";import{S as se}from"./shortcut-user-button.b5fbf8bb.js";import"./shortcut-button.7fcdb474.js";function J(s,t,n){const e=s.slice();return e[10]=t[n],e[12]=n,e}function ae(s){let t,n;return t=new q({props:{name:"search",size:24}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){v(t,e,r),n=!0},p:P,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){w(t,e)}}}function ie(s){let t=T.t("people.no-people-found","No People Found")+"",n;return{c(){n=L(t)},l(e){n=S(e,t)},m(e,r){g(e,n,r)},p:P,d(e){e&&m(n)}}}function ce(s){let t=T.t("tabs.people","People")+"",n;return{c(){n=L(t)},l(e){n=S(e,t)},m(e,r){g(e,n,r)},p:P,d(e){e&&m(n)}}}function fe(s){let t,n;return t=new q({props:{name:"userAdd",className:"fill-primary-bright"}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){v(t,e,r),n=!0},p:P,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){w(t,e)}}}function ue(s){let t,n,e,r,o,$;t=new X({props:{color:"none",shape:"round",className:"tap-icon",$$slots:{default:[ae]},$$scope:{ctx:s}}}),t.$on("click",s[7]);function f(a,u){return a[0].people.length?ce:ie}let p=f(s),c=p(s);return o=new X({props:{color:"none",shape:"round",className:"tap-icon",$$slots:{default:[fe]},$$scope:{ctx:s}}}),o.$on("click",s[3]),{c(){b(t.$$.fragment),n=C(),e=z("div"),c.c(),r=C(),b(o.$$.fragment),this.h()},l(a){k(t.$$.fragment,a),n=E(a),e=j(a,"DIV",{class:!0});var u=I(e);c.l(u),u.forEach(m),r=E(a),k(o.$$.fragment,a),this.h()},h(){N(e,"class","ntitle")},m(a,u){v(t,a,u),g(a,n,u),g(a,e,u),c.m(e,null),g(a,r,u),v(o,a,u),$=!0},p(a,u){const y={};u&8192&&(y.$$scope={dirty:u,ctx:a}),t.$set(y),p===(p=f(a))&&c?c.p(a,u):(c.d(1),c=p(a),c&&(c.c(),c.m(e,null)));const l={};u&8192&&(l.$$scope={dirty:u,ctx:a}),o.$set(l)},i(a){$||(_(t.$$.fragment,a),_(o.$$.fragment,a),$=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),$=!1},d(a){w(t,a),a&&m(n),a&&m(e),c.d(),a&&m(r),w(o,a)}}}function pe(s){let t,n;return t=new oe({props:{className:" px-2",$$slots:{default:[ue]},$$scope:{ctx:s}}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){v(t,e,r),n=!0},p(e,r){const o={};r&8193&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){w(t,e)}}}function $e(s){let t,n,e;return n=new M({props:{$$slots:{default:[pe]},$$scope:{ctx:s}}}),{c(){t=z("div"),b(n.$$.fragment),this.h()},l(r){t=j(r,"DIV",{slot:!0,class:!0});var o=I(t);k(n.$$.fragment,o),o.forEach(m),this.h()},h(){N(t,"slot","header"),N(t,"class","flex")},m(r,o){g(r,t,o),v(n,t,null),e=!0},p(r,o){const $={};o&8193&&($.$$scope={dirty:o,ctx:r}),n.$set($)},i(r){e||(_(n.$$.fragment,r),e=!0)},o(r){d(n.$$.fragment,r),e=!1},d(r){r&&m(t),w(n)}}}function me(s){let t,n;return t=new H({props:{$$slots:{default:[he]},$$scope:{ctx:s}}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){v(t,e,r),n=!0},p(e,r){const o={};r&8193&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){w(t,e)}}}function _e(s){let t,n;return t=new H({props:{$$slots:{default:[ge]},$$scope:{ctx:s}}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){v(t,e,r),n=!0},p(e,r){const o={};r&8192&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){w(t,e)}}}function de(s){let t,n;return t=new le({props:{title:T.t("general.people"),emoji:"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}",description:T.t("people.empty-message","Track & monitor how you interact with your friends and family"),buttonLabel:T.t("people.add-a-person","Add a Person..."),buttonClick:s[3]}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){v(t,e,r),n=!0},p:P,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){w(t,e)}}}function he(s){let t,n=s[0].searchTerm+"",e;return{c(){t=L("Nothing found for @"),e=L(n)},l(r){t=S(r,"Nothing found for @"),e=S(r,n)},m(r,o){g(r,t,o),g(r,e,o)},p(r,o){o&1&&n!==(n=r[0].searchTerm+"")&&x(e,n)},d(r){r&&m(t),r&&m(e)}}}function ge(s){let t;return{c(){t=L("Loading...")},l(n){t=S(n,"Loading...")},m(n,e){g(n,t,e)},d(n){n&&m(t)}}}function Y(s,t){let n,e,r;function o(){return t[5](t[10])}function $(){return t[6](t[10])}return e=new se({props:{person:t[1].people[t[10]]}}),e.$on("click",o),e.$on("more",$),{key:s,first:null,c(){n=D(),b(e.$$.fragment),this.h()},l(f){n=D(),k(e.$$.fragment,f),this.h()},h(){this.first=n},m(f,p){g(f,n,p),v(e,f,p),r=!0},p(f,p){t=f;const c={};p&3&&(c.person=t[1].people[t[10]]),e.$set(c)},i(f){r||(_(e.$$.fragment,f),r=!0)},o(f){d(e.$$.fragment,f),r=!1},d(f){f&&m(n),w(e,f)}}}function be(s){let t,n,e,r,o=[],$=new Map,f;const p=[de,_e,me],c=[];function a(l,i){return!l[0].people.length&&!l[0].searchTerm&&l[0].initialized?0:l[0].initialized?!l[0].people.length&&l[0].searchTerm?2:-1:1}~(t=a(s))&&(n=c[t]=p[t](s));let u=s[0].people;const y=l=>l[10];for(let l=0;l<u.length;l+=1){let i=J(s,u,l),h=y(i);$.set(h,o[l]=Y(h,i))}return{c(){n&&n.c(),e=C(),r=z("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){n&&n.l(l),e=E(l),r=j(l,"DIV",{class:!0});var i=I(r);for(let h=0;h<o.length;h+=1)o[h].l(i);i.forEach(m),this.h()},h(){N(r,"class","item-grid")},m(l,i){~t&&c[t].m(l,i),g(l,e,i),g(l,r,i);for(let h=0;h<o.length;h+=1)o[h].m(r,null);f=!0},p(l,i){let h=t;t=a(l),t===h?~t&&c[t].p(l,i):(n&&(V(),d(c[h],1,1,()=>{c[h]=null}),O()),~t?(n=c[t],n?n.p(l,i):(n=c[t]=p[t](l),n.c()),_(n,1),n.m(e.parentNode,e)):n=null),i&7&&(u=l[0].people,V(),o=U(o,i,y,1,l,u,$,r,W,Y,null,J),O())},i(l){if(!f){_(n);for(let i=0;i<u.length;i+=1)_(o[i]);f=!0}},o(l){d(n);for(let i=0;i<o.length;i+=1)d(o[i]);f=!1},d(l){~t&&c[t].d(l),l&&m(e),l&&m(r);for(let i=0;i<o.length;i+=1)o[i].d()}}}function ke(s){let t,n,e;return n=new M({props:{size:"xl",className:"my-2",$$slots:{default:[be]},$$scope:{ctx:s}}}),{c(){t=z("div"),b(n.$$.fragment),this.h()},l(r){t=j(r,"DIV",{slot:!0});var o=I(t);k(n.$$.fragment,o),o.forEach(m),this.h()},h(){N(t,"slot","content")},m(r,o){g(r,t,o),v(n,t,null),e=!0},p(r,o){const $={};o&8195&&($.$$scope={dirty:o,ctx:r}),n.$set($)},i(r){e||(_(n.$$.fragment,r),e=!0)},o(r){d(n.$$.fragment,r),e=!1},d(r){r&&m(t),w(n)}}}function ve(s){let t,n;return t=new ee({props:{pageTitle:"People",$$slots:{content:[ke],header:[$e]},$$scope:{ctx:s}}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){v(t,e,r),n=!0},p(e,[r]){const o={};r&8195&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){w(t,e)}}}function we(s,t,n){let e;Q(s,F,l=>n(1,e=l));const r=void 0;let o={people:[],view:"time",stats:{},searchTerm:null,initialized:!1};const $=l=>{A.person(l)};function f(){n(0,o.people=c().sort((l,i)=>e.people[l].last<e.people[i].last?1:-1),o),n(0,o.initialized=!0,o)}function p(){return B(this,null,function*(){try{let l=yield A.prompt(T.t("people.person-name","Person Name"));if(l){let i=yield F.addByName(l);i&&(te.fastLog(`Added @${i.username} to +nomie`),$(i.username))}}catch(l){A.alert("Error",l.message)}})}function c(){return o.searchTerm?Object.keys((e||{}).people||{}).filter(l=>l.toLowerCase().search(o.searchTerm)>-1):Object.keys((e||{}).people||{})}R(()=>{f()});const a=l=>{$(l)},u=l=>{ne(`@${l}`)},y=()=>{re.view("people")};return s.$$.update=()=>{s.$$.dirty&3&&o.view&&e.people&&(f(),n(0,o.initialized=!0,o))},[o,e,$,p,r,a,u,y]}class Se extends Z{constructor(t){super();G(this,t,we,ve,K,{location:4})}get location(){return this.$$.ctx[4]}}export{Se as default};
